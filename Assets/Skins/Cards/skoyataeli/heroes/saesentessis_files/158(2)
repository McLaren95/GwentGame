(()=>{(()=>{var Nt={3156:function(T,x,A){(function(j,D){T.exports=x=D()})(this,function(){var j=j||function(D,q){var O;if(typeof window!="undefined"&&window.crypto&&(O=window.crypto),typeof self!="undefined"&&self.crypto&&(O=self.crypto),typeof globalThis!="undefined"&&globalThis.crypto&&(O=globalThis.crypto),!O&&typeof window!="undefined"&&window.msCrypto&&(O=window.msCrypto),!O&&typeof A.g!="undefined"&&A.g.crypto&&(O=A.g.crypto),!O)try{O=A(477)}catch(h){}var M=function(){if(O){if(typeof O.getRandomValues=="function")try{return O.getRandomValues(new Uint32Array(1))[0]}catch(h){}if(typeof O.randomBytes=="function")try{return O.randomBytes(4).readInt32LE()}catch(h){}}throw new Error("Native crypto module could not be used to get secure random number.")},Y=Object.create||function(){function h(){}return function(p){var y;return h.prototype=p,y=new h,h.prototype=null,y}}(),rt={},Q=rt.lib={},K=Q.Base=function(){return{extend:function(h){var p=Y(this);return h&&p.mixIn(h),(!p.hasOwnProperty("init")||this.init===p.init)&&(p.init=function(){p.$super.init.apply(this,arguments)}),p.init.prototype=p,p.$super=this,p},create:function(){var h=this.extend();return h.init.apply(h,arguments),h},init:function(){},mixIn:function(h){for(var p in h)h.hasOwnProperty(p)&&(this[p]=h[p]);h.hasOwnProperty("toString")&&(this.toString=h.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),V=Q.WordArray=K.extend({init:function(h,p){h=this.words=h||[],p!=q?this.sigBytes=p:this.sigBytes=h.length*4},toString:function(h){return(h||U).stringify(this)},concat:function(h){var p=this.words,y=h.words,w=this.sigBytes,L=h.sigBytes;if(this.clamp(),w%4)for(var S=0;S<L;S++){var J=y[S>>>2]>>>24-S%4*8&255;p[w+S>>>2]|=J<<24-(w+S)%4*8}else for(var $=0;$<L;$+=4)p[w+$>>>2]=y[$>>>2];return this.sigBytes+=L,this},clamp:function(){var h=this.words,p=this.sigBytes;h[p>>>2]&=4294967295<<32-p%4*8,h.length=D.ceil(p/4)},clone:function(){var h=K.clone.call(this);return h.words=this.words.slice(0),h},random:function(h){for(var p=[],y=0;y<h;y+=4)p.push(M());return new V.init(p,h)}}),tt=rt.enc={},U=tt.Hex={stringify:function(h){for(var p=h.words,y=h.sigBytes,w=[],L=0;L<y;L++){var S=p[L>>>2]>>>24-L%4*8&255;w.push((S>>>4).toString(16)),w.push((S&15).toString(16))}return w.join("")},parse:function(h){for(var p=h.length,y=[],w=0;w<p;w+=2)y[w>>>3]|=parseInt(h.substr(w,2),16)<<24-w%8*4;return new V.init(y,p/2)}},B=tt.Latin1={stringify:function(h){for(var p=h.words,y=h.sigBytes,w=[],L=0;L<y;L++){var S=p[L>>>2]>>>24-L%4*8&255;w.push(String.fromCharCode(S))}return w.join("")},parse:function(h){for(var p=h.length,y=[],w=0;w<p;w++)y[w>>>2]|=(h.charCodeAt(w)&255)<<24-w%4*8;return new V.init(y,p)}},m=tt.Utf8={stringify:function(h){try{return decodeURIComponent(escape(B.stringify(h)))}catch(p){throw new Error("Malformed UTF-8 data")}},parse:function(h){return B.parse(unescape(encodeURIComponent(h)))}},P=Q.BufferedBlockAlgorithm=K.extend({reset:function(){this._data=new V.init,this._nDataBytes=0},_append:function(h){typeof h=="string"&&(h=m.parse(h)),this._data.concat(h),this._nDataBytes+=h.sigBytes},_process:function(h){var p,y=this._data,w=y.words,L=y.sigBytes,S=this.blockSize,J=S*4,$=L/J;h?$=D.ceil($):$=D.max(($|0)-this._minBufferSize,0);var z=$*S,Z=D.min(z*4,L);if(z){for(var nt=0;nt<z;nt+=S)this._doProcessBlock(w,nt);p=w.splice(0,z),y.sigBytes-=Z}return new V.init(p,Z)},clone:function(){var h=K.clone.call(this);return h._data=this._data.clone(),h},_minBufferSize:0}),N=Q.Hasher=P.extend({cfg:K.extend(),init:function(h){this.cfg=this.cfg.extend(h),this.reset()},reset:function(){P.reset.call(this),this._doReset()},update:function(h){return this._append(h),this._process(),this},finalize:function(h){h&&this._append(h);var p=this._doFinalize();return p},blockSize:512/32,_createHelper:function(h){return function(p,y){return new h.init(y).finalize(p)}},_createHmacHelper:function(h){return function(p,y){return new F.HMAC.init(h,y).finalize(p)}}}),F=rt.algo={};return rt}(Math);return j})},2316:function(T,x,A){(function(j,D){T.exports=x=D(A(3156))})(this,function(j){return function(D){var q=j,O=q.lib,M=O.WordArray,Y=O.Hasher,rt=q.algo,Q=[],K=[];(function(){function U(N){for(var F=D.sqrt(N),h=2;h<=F;h++)if(!(N%h))return!1;return!0}function B(N){return(N-(N|0))*4294967296|0}for(var m=2,P=0;P<64;)U(m)&&(P<8&&(Q[P]=B(D.pow(m,.5))),K[P]=B(D.pow(m,.3333333333333333)),P++),m++})();var V=[],tt=rt.SHA256=Y.extend({_doReset:function(){this._hash=new M.init(Q.slice(0))},_doProcessBlock:function(U,B){for(var m=this._hash.words,P=m[0],N=m[1],F=m[2],h=m[3],p=m[4],y=m[5],w=m[6],L=m[7],S=0;S<64;S++){if(S<16)V[S]=U[B+S]|0;else{var J=V[S-15],$=(J<<25|J>>>7)^(J<<14|J>>>18)^J>>>3,z=V[S-2],Z=(z<<15|z>>>17)^(z<<13|z>>>19)^z>>>10;V[S]=$+V[S-7]+Z+V[S-16]}var nt=p&y^~p&w,it=P&N^P&F^N&F,et=(P<<30|P>>>2)^(P<<19|P>>>13)^(P<<10|P>>>22),ut=(p<<26|p>>>6)^(p<<21|p>>>11)^(p<<7|p>>>25),at=L+ut+nt+K[S]+V[S],lt=et+it;L=w,w=y,y=p,p=h+at|0,h=F,F=N,N=P,P=at+lt|0}m[0]=m[0]+P|0,m[1]=m[1]+N|0,m[2]=m[2]+F|0,m[3]=m[3]+h|0,m[4]=m[4]+p|0,m[5]=m[5]+y|0,m[6]=m[6]+w|0,m[7]=m[7]+L|0},_doFinalize:function(){var U=this._data,B=U.words,m=this._nDataBytes*8,P=U.sigBytes*8;return B[P>>>5]|=128<<24-P%32,B[(P+64>>>9<<4)+14]=D.floor(m/4294967296),B[(P+64>>>9<<4)+15]=m,U.sigBytes=B.length*4,this._process(),this._hash},clone:function(){var U=Y.clone.call(this);return U._hash=this._hash.clone(),U}});q.SHA256=Y._createHelper(tt),q.HmacSHA256=Y._createHmacHelper(tt)}(Math),j.SHA256})},116:()=>{(function(T,x){"use strict";T=T||"docReady",x=x||window;var A=[],j=!1,D=!1;function q(){if(!j){j=!0;for(var M=0;M<A.length;M++)A[M].fn.call(window,A[M].ctx);A=[]}}function O(){document.readyState==="complete"&&q()}x[T]=function(M,Y){if(typeof M!="function")throw new TypeError("callback for docReady(fn) must be a function");if(j){setTimeout(function(){M(Y)},1);return}else A.push({fn:M,ctx:Y});document.readyState==="complete"||!document.attachEvent&&document.readyState==="interactive"?setTimeout(q,1):D||(document.addEventListener?(document.addEventListener("DOMContentLoaded",q,!1),window.addEventListener("load",q,!1)):(document.attachEvent("onreadystatechange",O),window.attachEvent("onload",q)),D=!0)}})("docReady",window)},477:()=>{}},At={};function W(T){var x=At[T];if(x!==void 0)return x.exports;var A=At[T]={exports:{}};return Nt[T].call(A.exports,A,A.exports,W),A.exports}W.n=T=>{var x=T&&T.__esModule?()=>T.default:()=>T;return W.d(x,{a:x}),x},W.d=(T,x)=>{for(var A in x)W.o(x,A)&&!W.o(T,A)&&Object.defineProperty(T,A,{enumerable:!0,get:x[A]})},W.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(T){if(typeof window=="object")return window}}(),W.o=(T,x)=>Object.prototype.hasOwnProperty.call(T,x);var me={};(()=>{"use strict";var T=W(2316),x=W.n(T);const A=document,j=null,D=()=>{const r=A.createElement("a");return r.href=j.location,r},q=(r,t)=>{const e=A.createElement("img");return e.height=1,e.width=1,e.style.display="none",e.src=r,e.onload=t,e.alt="",A.body.appendChild(e)},O=r=>{const t=A.createElement("iframe");return t.width=1,t.height=1,t.style.display="none",t.src=r,A.body.appendChild(t)},M=(r,t=!0)=>{const e=A.createElement("script");return e.type="text/javascript",e.src=r,e.async=t,A.body.appendChild(e)},Y={img:q,script:M,iframe:O},rt=(r,t)=>{t||(t=window.location.href),r=r.replace(/[\[\]]/g,"\\$&");let e=new RegExp("[?&]"+r+"(=([^&#]*)|&|#|$)"),s=e.exec(t);return s?s[2]?decodeURIComponent(s[2].replace(/\+/g," ")):"":null},Q=r=>{let t="_au_"+r+"=",s=decodeURIComponent(document.cookie).split(";");for(let n=0;n<s.length;n++){let a=s[n];for(;a.charAt(0)==" ";)a=a.substring(1);if(a.indexOf(t)==0)return a.substring(t.length,a.length)}return null},K=(r,t,e)=>(parseInt(Q(r))||0)+t<e,V=r=>{const t=/[a-z0-9][a-z0-9-]*\.[a-z]+$/i;let s=/[a-z0-9][a-z0-9-]+\.[a-z.]{2,6}$/i,n=r.split("."),a=n[n.length-1];(a.length>4||a==="com"||a==="org"||a==="net")&&(s=t);let o=r.match(s);return o?o[0]:r},tt=(r,t)=>{document.cookie="_au_"+r+"="+t+"; domain="+V(document.location.hostname)+"; path=/; max-age=31536000"};function U(r){let t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");r||(r=Math.floor(Math.random()*t.length));let e="";for(let s=0;s<r;s++)e+=t[Math.floor(Math.random()*t.length)];return e}function B(){const r=Math.round(Date.now()/1e3);return"AU1S-0100-"+String(r).padStart(12,"0")+"-"+U(8)+"-"+U(4)}function m(r){function t(v,f){var E,_,G,R,I;return G=v&2147483648,R=f&2147483648,E=v&1073741824,_=f&1073741824,I=(v&1073741823)+(f&1073741823),E&_?I^2147483648^G^R:E|_?I&1073741824?I^3221225472^G^R:I^1073741824^G^R:I^G^R}function e(v,f,E,_,G,R,I){return v=t(v,t(t(f&E|~f&_,G),I)),t(v<<R|v>>>32-R,f)}function s(v,f,E,_,G,R,I){return v=t(v,t(t(f&_|E&~_,G),I)),t(v<<R|v>>>32-R,f)}function n(v,f,E,_,G,R,I){return v=t(v,t(t(f^E^_,G),I)),t(v<<R|v>>>32-R,f)}function a(v,f,E,_,G,R,I){return v=t(v,t(t(E^(f|~_),G),I)),t(v<<R|v>>>32-R,f)}function o(v){var f="",E="",_;for(_=0;3>=_;_++)E=v>>>8*_&255,E="0"+E.toString(16),f+=E.substr(E.length-2,2);return f}var i=[],g,b,C,k,c,u,d,l;for(r=function(v){v=v.replace(/\r\n/g,`
`);for(var f="",E=0;E<v.length;E++){var _=v.charCodeAt(E);128>_?f+=String.fromCharCode(_):(127<_&&2048>_?f+=String.fromCharCode(_>>6|192):(f+=String.fromCharCode(_>>12|224),f+=String.fromCharCode(_>>6&63|128)),f+=String.fromCharCode(_&63|128))}return f}(r),i=function(v){var f,E=v.length;f=E+8;for(var _=16*((f-f%64)/64+1),G=Array(_-1),R=0,I=0;I<E;)f=(I-I%4)/4,R=I%4*8,G[f]|=v.charCodeAt(I)<<R,I++;return f=(I-I%4)/4,G[f]|=128<<I%4*8,G[_-2]=E<<3,G[_-1]=E>>>29,G}(r),c=1732584193,u=4023233417,d=2562383102,l=271733878,r=0;r<i.length;r+=16)g=c,b=u,C=d,k=l,c=e(c,u,d,l,i[r+0],7,3614090360),l=e(l,c,u,d,i[r+1],12,3905402710),d=e(d,l,c,u,i[r+2],17,606105819),u=e(u,d,l,c,i[r+3],22,3250441966),c=e(c,u,d,l,i[r+4],7,4118548399),l=e(l,c,u,d,i[r+5],12,1200080426),d=e(d,l,c,u,i[r+6],17,2821735955),u=e(u,d,l,c,i[r+7],22,4249261313),c=e(c,u,d,l,i[r+8],7,1770035416),l=e(l,c,u,d,i[r+9],12,2336552879),d=e(d,l,c,u,i[r+10],17,4294925233),u=e(u,d,l,c,i[r+11],22,2304563134),c=e(c,u,d,l,i[r+12],7,1804603682),l=e(l,c,u,d,i[r+13],12,4254626195),d=e(d,l,c,u,i[r+14],17,2792965006),u=e(u,d,l,c,i[r+15],22,1236535329),c=s(c,u,d,l,i[r+1],5,4129170786),l=s(l,c,u,d,i[r+6],9,3225465664),d=s(d,l,c,u,i[r+11],14,643717713),u=s(u,d,l,c,i[r+0],20,3921069994),c=s(c,u,d,l,i[r+5],5,3593408605),l=s(l,c,u,d,i[r+10],9,38016083),d=s(d,l,c,u,i[r+15],14,3634488961),u=s(u,d,l,c,i[r+4],20,3889429448),c=s(c,u,d,l,i[r+9],5,568446438),l=s(l,c,u,d,i[r+14],9,3275163606),d=s(d,l,c,u,i[r+3],14,4107603335),u=s(u,d,l,c,i[r+8],20,1163531501),c=s(c,u,d,l,i[r+13],5,2850285829),l=s(l,c,u,d,i[r+2],9,4243563512),d=s(d,l,c,u,i[r+7],14,1735328473),u=s(u,d,l,c,i[r+12],20,2368359562),c=n(c,u,d,l,i[r+5],4,4294588738),l=n(l,c,u,d,i[r+8],11,2272392833),d=n(d,l,c,u,i[r+11],16,1839030562),u=n(u,d,l,c,i[r+14],23,4259657740),c=n(c,u,d,l,i[r+1],4,2763975236),l=n(l,c,u,d,i[r+4],11,1272893353),d=n(d,l,c,u,i[r+7],16,4139469664),u=n(u,d,l,c,i[r+10],23,3200236656),c=n(c,u,d,l,i[r+13],4,681279174),l=n(l,c,u,d,i[r+0],11,3936430074),d=n(d,l,c,u,i[r+3],16,3572445317),u=n(u,d,l,c,i[r+6],23,76029189),c=n(c,u,d,l,i[r+9],4,3654602809),l=n(l,c,u,d,i[r+12],11,3873151461),d=n(d,l,c,u,i[r+15],16,530742520),u=n(u,d,l,c,i[r+2],23,3299628645),c=a(c,u,d,l,i[r+0],6,4096336452),l=a(l,c,u,d,i[r+7],10,1126891415),d=a(d,l,c,u,i[r+14],15,2878612391),u=a(u,d,l,c,i[r+5],21,4237533241),c=a(c,u,d,l,i[r+12],6,1700485571),l=a(l,c,u,d,i[r+3],10,2399980690),d=a(d,l,c,u,i[r+10],15,4293915773),u=a(u,d,l,c,i[r+1],21,2240044497),c=a(c,u,d,l,i[r+8],6,1873313359),l=a(l,c,u,d,i[r+15],10,4264355552),d=a(d,l,c,u,i[r+6],15,2734768916),u=a(u,d,l,c,i[r+13],21,1309151649),c=a(c,u,d,l,i[r+4],6,4149444226),l=a(l,c,u,d,i[r+11],10,3174756917),d=a(d,l,c,u,i[r+2],15,718787259),u=a(u,d,l,c,i[r+9],21,3951481745),c=t(c,g),u=t(u,b),d=t(d,C),l=t(l,k);return(o(c)+o(u)+o(d)+o(l)).toLowerCase()}class P{constructor(t){this.pixels=t,this.parameters={sku:"",orderId:"",qty:"",revenue:"",ltv:""}}dropPixel(t,e){const s=this.pixels[t]||[];let n=this.parameters;e&&Object.keys(e).forEach(a=>(n[a]=e[a],!1)),s.forEach(a=>{let o=a,i="img";return typeof a!="string"&&(o=a[0],i=a[1],i||(i="img")),o=o.replace(/\[\[SKU\]\]/g,n.sku),o=o.replace(/\[\[ORDERID\]\]/g,n.orderId),o=o.replace(/\[\[QTY\]\]/g,n.qty),o=o.replace(/\[\[REVENUE\]\]/g,n.revenue),o=o.replace(/\[\[LTV\]\]/g,n.ltv),o=o.replace(/\[\[ITEMS\]\]/g,(n.items||[]).map(g=>g.id||"").join(",")),i==="img"?q(o):i==="script"?M(o):i==="iframe"?O(o):!1})}}class N{constructor(t,e,s){this.w=t,this.partnerId=e,this.taggerId=s,window.aupixels?this.pixels=window.aupixels.ec||{}:this.pixels={},this.ECPixels=new P(this.pixels),this.pageLoadRun=[],window.Adgt||(window.Adgt={}),window.Adgt.VarWatch=function(n,a,o){let i=n[a];function g(){if(n[a]!=i){const b=i;i=n[a],o(b,i)}}return g},window.Adgt.VarHandler=function(n,a){window.au.push({category:"DispatchEvent",eventName:"ProductMetaUpdated"}),clearInterval(window.Adgt.variantInterval)},window.Adgt.SetVarInterval=function(n,a){window.Adgt.variantInterval=setInterval(window.Adgt.VarWatch(n,a,window.Adgt.VarHandler),100)},window.Adgt.Store=this}pathIncludes(t){return window.location.pathname.indexOf(t)!==-1}updatePixels(){this.pixels=window.aupixels.ec||{},this.ECPixels=new P(this.pixels),this.pageLoadRun.forEach(t=>{let e={};t==="add"||t==="view"?e={sku:this.product.id}:t==="checkout"?e={qty:this.qty,revenue:this.revenue}:t==="transaction"&&(e={qty:this.transaction.items.length||this.qty,revenue:this.transaction.revenue||this.revenue,orderId:this.transaction.id}),this.ECPixels.dropPixel(t,e)}),this.pageLoadRun=[]}appendPageLoadPixelCheck(t){this.pageLoadRun.filter(s=>s===t).length||this.pageLoadRun.push(t)}setClassProducts(t){this.products=t,this.qty=t.length,this.revenue=t.reduce((e,s)=>e+parseFloat(s.price),0)}sendAddProductEventToGA(t){this.product=t;try{this.sendAddProductToGA(t),this.w.audGtag("event","add_to_cart",{value:t.price.toFixed(2),items:[t]}),this.ECPixels.dropPixel("add",{sku:t.id,revenue:t.price.toFixed(2)})}catch(e){console.error(e)}}sendViewProductEventToGA(t){this.product=t;try{this.w.audGtag("event","view_promotion",{promotion_id:t.id,promotion_name:t.name,items:[t]}),this.w.audGtag("event","page_view",{page_title:t.id}),this.ECPixels.dropPixel("view",{sku:t.id})}catch(e){console.error(e)}}sendAllProductsInCartToGA(t,e){this.setClassProducts(t);try{for(let s=0;s<t.length;s++){const n=t[s];this.sendAddProductToGA(n)}return e(),!0}catch(s){return!1}}sendCheckoutEventToGA(){try{this.w.audGtag("event","begin_checkout",{currency:"USD",value:this.revenue,items:[this.products]}),this.ECPixels.dropPixel("checkout",{qty:this.qty,revenue:this.revenue})}catch(t){console.error(t)}}sendAllProductsInTransactionToGA(t,e){this.setClassProducts(t);try{for(let s=0;s<t.length;s++){const n=t[s];this.sendAddProductToGA(n)}return e(),!0}catch(s){return!1}}sendAddProductToGA(t){this.w.audGtag("event","add_to_cart",{currency:t.currencyCode,value:t.price*(t.quantity||1),items:[{item_id:t.id,item_name:t.name,index:0,item_brand:t.brand,price:t.price,quantity:t.quantity||1}]})}sendTransactionEventToGA(t){this.transaction=t;try{this.w.audGtag("event","purchase",{currency:t.currencyCode,transaction_id:t.id,value:t.revenue,tax:t.tax,shipping:t.shipping,items:t.items||[]}),this.w.audGtag("event","page_view",{page_title:t.id}),this.ECPixels.dropPixel("transaction",{qty:(t.items||[]).length||this.qty,revenue:t.revenue||this.revenue,orderId:t.id,items:t.items||[],ltv:t.ltv||""})}catch(e){console.error(e)}}profilerServiceRequest(t){window.au.push({category:"sendUserBehaviour",action:JSON.stringify(t)})}sendErrorToSentry(){return!1}}class F extends N{constructor(t,e,s){super(t,e,s),this.brand=window.Shopify.shop}captureProduct(t){try{const e=window.ShopifyAnalytics.meta.selectedVariantId;let s=window.ShopifyAnalytics.meta.product.variants[0];return t?s=window.ShopifyAnalytics.meta.product.variants.find(function(n){return n.public_title===t}):e&&(s=window.ShopifyAnalytics.meta.product.variants.find(function(n){return n.id.toString()===e.toString()})),s||(s=window.ShopifyAnalytics.meta.product.variants[0],s.id=window.ShopifyAnalytics.meta.product.id),{id:`${s.id}-${this.taggerId}`,name:s.name,price:parseInt(s.price,10)/100,brand:this.brand}}catch(e){return console.error(e),null}}sendProductEvents(){const t=this.captureProduct();if(t){this.sendViewProductEventToGA(t),this.appendPageLoadPixelCheck("view");const e=document.querySelector('button[name="add"]')||document.querySelector("form#add-item-form button")||document.querySelector("button.shopify_add_to_cart")||document.querySelector('input[name="add"]')||document.querySelector(".ProductForm__AddToCart")||document.querySelector("#AddToCart")||document.querySelector('.product-add input[type="submit"]');e&&window.au.push({category:"ListenerAttacher",input:e,method:()=>{this.sendAddProductEventToGA(t),window.au.push({category:"behavior",action:"purchase-intent"});const s={event:"addToCart",data:t};this.profilerServiceRequest(s)}})}}captureCart(){try{const e=document.querySelector("#order-summary").querySelectorAll("tr.product"),s=[];for(let n=0;n<e.length;n++){const a=e[n],o=a.dataset.productId,i=a.querySelector(".product__description__name").textContent,g=parseFloat(a.querySelector(".product__price").textContent.replace(/[^0-9.]/g,"")),b=parseInt(a.querySelector(".product__quantity").textContent.replace(/\s+/g,""),10),C={id:`${o}-${this.taggerId}`,name:i,brand:this.brand,price:g,quantity:b};s.push(C)}return s}catch(t){return console.error(t),null}}calculateRevenue(t){let e=0;for(let s=0;s<t.length;s++)e+=parseFloat(t[s].price);return e}captureTransaction(){try{const t=window.Shopify.checkout,e=window.Shopify.shop,s=t.order_id,n=parseFloat(t.subtotal_price);let a=0;try{a=parseFloat(t.total_tax)}catch(g){console.error(g)}let o=0;if(t.shipping_rate)try{o=parseFloat(t.shipping_rate)}catch(g){try{o=parseFloat(t.shipping_rate.price)}catch(b){console.error(b)}}const i=this.formatProductsInTransaction(t.line_items);return{id:`${s}-${this.taggerId}`,affiliation:e,revenue:n,tax:a,shipping:o,items:i}}catch(t){return console.error(t),null}}formatProductsInTransaction(t){const e=t,s=[];for(let n=0;n<e.length;n++){const a=e[n],o={id:a.product_id,name:a.title,brand:this.brand,price:parseFloat(a.price),quantity:a.quantity};s.push(o)}return s}initialize(){const t={product:window.ShopifyAnalytics&&window.ShopifyAnalytics.meta&&window.ShopifyAnalytics.meta.product,checkout:window.Shopify.Checkout&&window.Shopify.Checkout.page&&window.Shopify.Checkout.page!=="thank_you",confirmation:window.Shopify.checkout},e=document.querySelectorAll("div.quickadd");if(e.length>0)for(let s=0;s<e.length;s++){const n=e[s],a=n.querySelector("button").dataset.cartAdd;let o=n.querySelector('[class$="item__title"]').textContent;if(n.querySelector(".js-option-value")){const b=n.querySelector(".js-option-value").textContent.split(": ");o+=b[b.length-1]}const i=parseFloat(n.querySelector(".product-price__price").textContent.replace(/[^0-9.]/g,"")),g={id:a,name:o,price:i,brand:this.brand};window.au.push({category:"ListenerAttacher",input:n,method:()=>{this.sendAddProductEventToGA(g);const b={event:"addToCart",data:g};window.au.push({category:"behavior",action:"purchase-intent"}),this.profilerServiceRequest(b)}})}if(t.product){this.sendProductEvents();const s=document.querySelectorAll(".swatch-element");if(s.length>0){window.addEventListener("ProductMetaUpdated",()=>{this.sendProductEvents()});for(let n=0;n<s.length;n++){const a=s[n];window.au.push({category:"ListenerAttacher",input:a,method:()=>{window.Adgt.SetVarInterval(window.ShopifyAnalytics.meta,"selectedVariantId")}})}}}if(t.checkout){const s=this.captureCart();s&&(window.au.push({category:"behavior",action:"checkout"}),this.appendPageLoadPixelCheck("checkout"),this.sendAllProductsInCartToGA(s,()=>this.sendCheckoutEventToGA()))}if(t.confirmation&&window.location.pathname.indexOf("thank_you")!==-1){const s=this.captureTransaction();if(s){const n=s.items;window.au.push({category:"behavior",action:"purchase-complete"}),this.appendPageLoadPixelCheck("transaction"),this.sendAllProductsInTransactionToGA(n,()=>this.sendTransactionEventToGA(s))}else this.transaction={id:`null-${this.taggerId}`,affiliation:this.brand,revenue:0,tax:0,shipping:0,items:[]},this.appendPageLoadPixelCheck("transaction")}}}const h=F,p=60*1e3,y=60*p,w=24*y;function L(r){var t="au/test";try{return r.localStorage.setItem(t,t),r.localStorage.removeItem(t),!0}catch(e){return!1}}class S{constructor(t){this.w=t,this.now=1*new Date,this.useCookie=!L(this.w)}getCookie(t){return Q(t)}get(t,e=!1){if(this.useCookie||e)return this.getCookie(t);let s=this.w.localStorage.getItem("au/"+t);if(s){if(s=JSON.parse(s),s.e>this.now)return s.v;this.w.localStorage.removeItem("au/"+t)}return null}setCookie(t,e,s=p){tt(t,e)}set(t,e,s=p,n=!1){this.useCookie||n?this.setCookie(t,e,s):this.w.localStorage.setItem("au/"+t,JSON.stringify({v:e,e:this.now+s}))}}const J=S,$=null,z=null,Z="G-FVWZ0RM4DH",nt=null,it="https://a.ad.gt",et="https://p.ad.gt",ut="https://pixels.ad.gt",at="https://seg.ad.gt",lt="https://ids.ad.gt",St="https://proton.ad.gt";var Et=r=>{throw TypeError(r)},Bt=(r,t,e)=>t.has(r)||Et("Cannot "+e),jt=(r,t,e)=>t.has(r)?Et("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,e),ot=(r,t,e)=>(Bt(r,t,"access private method"),e),st,Pt,ht,bt;function $t(r,t){let e=[];try{if(typeof t.featurePolicy=="undefined")return e;"browsingTopics"in t&&t.featurePolicy.allowsFeature("browsing-topics")&&e.push("BT"),"joinAdInterestGroup"in r.navigator&&t.featurePolicy.allowsFeature("join-ad-interest-group")&&e.push("JI"),"runAdAuction"in r.navigator&&t.featurePolicy.allowsFeature("run-ad-auction")&&e.push("RA"),t.featurePolicy.allowsFeature("attribution-reporting")&&e.push("AR")}catch(s){console.error(s)}return e}class Wt{constructor(t,e,s){jt(this,st),this.w=t,this.d=e,this.auvars=s,this.iframe=null,this.iframeQueue=[],this.iframeReady=!1}run(){let t=new XMLHttpRequest;const e=new URL(`${at}/api/v2/match`);let s={hostname:this.w.location.hostname,partner_id:this.auvars.p,audigent_id:this.auvars.a};this.auvars.t!=null&&(s.tagger_id=this.auvars.t);let n=V(this.w.location.hostname),a=this;return t.onload=function(){var o;if(t.readyState==XMLHttpRequest.DONE&&t.status==200){const i=JSON.parse(t.response);Array.isArray(i)&&i.length>0?(ot(o=a,st,Pt).call(o),i.forEach(g=>{var b;g.domain=n,ot(b=a,st,ht).call(b,g)})):Array.isArray(i)&&i.length==0?a.w.au.push({partnerId:a.p,category:"sendEvent",event:{type:"empty_seg_array",domain:n}}):a.w.au.push({partnerId:a.p,category:"sendEvent",event:{type:"no_seg_array",domain:n}})}else t.readyState==XMLHttpRequest.DONE&&t.status>200&&a.w.au.push({partnerId:a.p,category:"sendEvent",event:{type:"error_from_seg_service",http_status:t.status,domain:n}})},t.onerror=function(){a.w.au.push({partnerId:a.p,category:"sendEvent",event:{type:"error_calling_seg_service",http_status:t.status,domain:n}})},t.open("POST",e,!0),t.setRequestHeader("Content-type","application/json"),t.send(JSON.stringify(s)),!0}}st=new WeakSet,Pt=function(){this.iframe=this.d.createElement("iframe"),this.iframe.style.display="none",this.iframe.src=`${St}/join-ad-interest-groups.html`,this.iframe.allow="join-ad-interest-group; attribution-reporting",this.iframe.sandbox="allow-scripts allow-same-origin",this.d.body.appendChild(this.iframe);let r=this;this.iframe.onload=()=>{r.iframeReady=!0,r.iframeQueue.forEach(t=>{var e;ot(e=r,st,ht).call(e,t)})}},ht=function(r){r.channel="AUPA",r.evid=U(8),this.iframeReady==!1?this.iframeQueue.push(r):(this.iframe.contentWindow.postMessage(r,St),ot(this,st,bt).call(this,r))},bt=function(r){const t=r.evid;switch(r.consumer){case"AUDIGENT":{const e=r.igs.map(s=>s.name);this.w.au.push({partnerId:this.p,category:"sendEvent",event:{type:"join_ad_interest_group",interest_groups:e,event_id:t}})}break;case"YAHOO":case"NEXTROLL":{const e=r.segs;this.w.au.push({partnerId:this.p,category:"sendEvent",event:{type:"external_audience",audiences:e,event_id:t,consumer:r.consumer}});break}default:break}};function It(r,t,e,s){r.au_seg=e,(s||[]).forEach(a=>a(r,t,e.segments));const n=new CustomEvent("auSegReady",{detail:e});t.dispatchEvent(n)}function ye(r,t,e){const s=r.apntag;if(typeof s!="undefined"&&typeof s.setPageOpts=="function"){let n={};typeof s.requests!="undefined"&&typeof s.requests.keywords!="undefined"&&(n=s.requests.keywords),n.AUDIGENT=(n.AUDIGENT||[]).concat(e),s.setPageOpts({keywords:n})}}function we(r,t,e){r.DTEvent.getEventPromise("dt-connatix-api-ready").then(function([s,n]){s.setMacros({AU_SEG:e})})}function Ct(r,t,e){r.googletag=r.googletag||{},r.googletag.cmd=r.googletag.cmd||[],r.googletag.cmd.push(function(){r.googletag.pubads().setTargeting("AU_SEG",e)})}function _e(r,t,e){try{if(r.self!==r.top){Ct(r.top,t,e);return}}catch(s){}Ct(r,t,e)}function Ae(r,t,e){t.cookie="au_seg="+e.join("|")+"; domain="+extractDomain(r.location.hostname)+"; path=/; max-age=86400; samesite=None; secure"}function Se(r,t,e){typeof r.setTargeting=="function"?r.setTargeting("AU_SEG",e):r.console.log("[Audigent] cannot find window.setTargeting function")}var Ft=Object.defineProperty,Jt=Object.defineProperties,zt=Object.getOwnPropertyDescriptors,Tt=Object.getOwnPropertySymbols,Xt=Object.prototype.hasOwnProperty,Yt=Object.prototype.propertyIsEnumerable,xt=r=>{throw TypeError(r)},Ot=(r,t,e)=>t in r?Ft(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,H=(r,t)=>{for(var e in t||(t={}))Xt.call(t,e)&&Ot(r,e,t[e]);if(Tt)for(var e of Tt(t))Yt.call(t,e)&&Ot(r,e,t[e]);return r},pt=(r,t)=>Jt(r,zt(t)),ft=(r,t,e)=>t.has(r)||xt("Cannot "+e),Qt=(r,t,e)=>(ft(r,t,"read from private field"),e?e.call(r):t.get(r)),Lt=(r,t,e)=>t.has(r)?xt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,e),Kt=(r,t,e,s)=>(ft(r,t,"write to private field"),s?s.call(r,e):t.set(r,e),e),Rt=(r,t,e)=>(ft(r,t,"access private method"),e),dt,ct,gt;const vt=window,Gt=document,kt={"og:title":"title","og:description":"description","og:image":"image","og:url":"url","og:type":"type","og:name":"name","og:locale":"locale"},Dt={description:"description",keywords:"keywords"},Zt="meta[name='audigent:tags']";class te{constructor(t){Lt(this,ct),Lt(this,dt);const{auvars:e,decoratorTarget:s,taggerStrategy:n}=t||{};this.w=vt,this.u=Gt.location||vt.location,this.d=Gt,this.auvars=e,this.dataStore=new J(vt),this.customOptions={},this.isIndexPage=this.u.pathname==="/",this.customTags=[],this.customAttributes={},this.userDefinedTags=[],this.userDefinedAttributes={},this.internalLinks=[],this.GlobalHandlers={},this.randNum=Math.random(),this.decoratorTarget=s||(this.isIndexPage?.95:.97),this.u.hostname.toLowerCase().endsWith("lnk.to")?this.taggerStrategy="FULL_PATH":this.taggerStrategy=n||this.auvars.tgs||"NONE",this.psf=$t(this.w,this.d),Kt(this,dt,new Wt(this.w,this.d,this.auvars,this.dataStore)),this.setupSessionId(),this.setupHadron(),this.setupGA4()}docReady(){if(this.customOptions.autoPageView!==!1&&this.sendPageView(),this.ListenerIterator("a",this.clickHandler),this.w.addEventListener("hashchange",()=>{this.sendSPAPageView({url:this.u.href}),this.pixels()}),window.Shopify){const t=new h(this.w,this.auvars.p,this.auvars.t);t.initialize(),window.addEventListener("aupixels",()=>{t.updatePixels()})}this.psf.includes("JI")&&Qt(this,dt).run()}clearOptions(){this.customOptions={}}setOptions(t){const{options:e}=t||{};return typeof e=="object"?(this.customOptions=H(H({},this.customOptions),e),!0):!1}observeDom(t,e,s={childList:!0}){const n=window.MutationObserver||window.WebKitMutationObserver;if(!(!t||t.nodeType!==1))if(n){const a=new n(e);return a.observe(t,s),a}else window.addEventListener&&(t.addEventListener("DOMNodeInserted",e,!1),t.addEventListener("DOMNodeRemoved",e,!1))}push(t,e,s){if(typeof t=="string")return e&&e!==this.auvars.p?(console.warn("[Audigent] skip .push("+t+"), p is not a match"),!1):(console.warn('[Audigent] deprecated use of "push": please use .push( object )'),(this[t]||(()=>!1)).call(this,s),!0);if(t&&typeof t=="object"){const{fn:n,category:a,partnerId:o}=t,i=n||a;if(o&&o!==this.auvars.p)return console.warn("[Audigent] skip .push("+i+"), partnerId is not a match"),!1;if(n){const g=t.args;return Array.isArray(g)?(g.map(b=>(this[i]||(()=>!1)).call(this,b)),!0):((this[i]||(()=>!1)).call(this,g),!0)}return(this[i]||(()=>!1)).call(this,t),!0}return console.warn("[Audigent] could not execute the required command: please check your syntax"),!1}setupHadron(){var t;const e=(t=this.w.hadron)==null?void 0:t.id;this.auvars.h=e||null}getAudigentId(t){if(t instanceof Function)return t(this.auvars.a),this.auvars.a;const{callback:e}=t||{};return e instanceof Function&&e(this.auvars.a),this.auvars.a}setupSessionId(){let t=this.dataStore.get("sid");t==null&&(t=B()),this.auvars.s=t,this.dataStore.set("sid",t,30*p)}getTaggerComponents(){return null}setupTaggerId(){const t=this.u.hostname.toLowerCase(),e=this.getTags();let s=this.getTaggerComponents();Array.isArray(s)&&s.length>0||(this.taggerStrategy=="FULL_PATH"?s=[t,this.u.pathname,this.auvars.p]:Array.isArray(e)&&e.length>0?s=[t,"["+e.join(",").toLowerCase()+"]",this.auvars.p]:s=[t,"/",this.auvars.p]);const n=m(s.join("")).toLowerCase();return this.auvars.t=n,this.dataStore.set("tid",n,y),n}getMetaAttributes(){const t=this.d.querySelectorAll("meta");let e={url:this.u.href,title:this.d.title};for(const s of t){let n;const a=s.getAttribute("property");if(a!==void 0)a in kt&&(n=kt[a]);else{const o=s.getAttribute("name");o in Dt&&(n=Dt[o])}if(n!==void 0){const o=s.getAttribute("content");o!==void 0&&typeof o=="string"&&(n==="keywords"?e[n]=o.split(",").map(i=>i.trim()).filter(i=>i.length>0):(!(n in e)||e[n].length<o.length)&&(e[n]=o))}}return e}getCustomAttributes(){return{}}getAttributes(){return H(H(H(H({},this.customAttributes),this.userDefinedAttributes),this.getCustomAttributes()),this.getMetaAttributes())}clearAttributes(){this.userDefinedAttributes={}}setAttributes(t){const{attributes:e}=t||{};return typeof e=="object"?(this.userDefinedAttributes=e,!0):!1}addAttributes(t){const{attributes:e}=t||{};return typeof e=="object"?(this.userDefinedAttributes=H(H({},this.userDefinedAttributes),e),!0):!1}getMetaTags(){const t=document.head.querySelectorAll(Zt)[0];return t?t.content.split("|").map(e=>e.trim()).filter(e=>e.length>0).map(e=>(this.u.hostname+" > "+e).toUpperCase()):[]}getCustomTags(){return[]}getTags(){return[...this.customTags,...this.userDefinedTags,...this.getCustomTags(),...this.getMetaTags()].filter(e=>typeof e=="string"||e instanceof String).map(e=>e.replace(/,/g,"")).map(e=>e.trim()).filter(e=>e.length>0).map(e=>e.toUpperCase())}clearTags(){this.userDefinedTags=[]}setTags(t){const{tags:e}=t||{};return Array.isArray(e)?(this.userDefinedTags=e,!0):typeof e=="string"?(this.userDefinedTags=[e],!0):!1}addTags(t){const{tags:e}=t||{};return Array.isArray(e)?(this.userDefinedTags=[...e,...this.userDefinedTags],!0):typeof e=="string"?(this.userDefinedTags=[e,...this.userDefinedTags],!0):!1}writeDecoratorRecord(t){const{tags:e,decor_dict:s,attributes:n}=t;this.customTags=[...this.customTags,...e||[]],this.customAttributes=H(H(H({},this.customAttributes),s||{}),n||{})}sendDecoratorRecord(){if(!(this.randNum>=this.decoratorTarget))return null;const e=this.getAttributes(),s=this.getTags(),n=pt(H({},e),{tags:s.join(),tagger_id:this.auvars.t,partner_id:this.auvars.p});let a=new XMLHttpRequest,o=`${et}/api/v1/dec`;return a.open("POST",o,!0),a.setRequestHeader("Content-type","application/json"),a.send(JSON.stringify(n)),a}setupGA4(){if(this.auvars.ga4===!0)try{let t=document.createElement("script");t.src="https://www.googletagmanager.com/gtag/js?id="+Z+"&l=audDataLayer",t.async=!0,document.head.appendChild(t);const e=this.w;typeof this.w.audGtag!="function"&&(this.w.audDataLayer=this.w.audDataLayer||[],this.w.audGtag=function(){e.audDataLayer.push(arguments)}),audGtag("js",new Date),audGtag("config",Z,{user_id:this.auvars.a,dimension3:this.auvars.p,dimension4:this.u.hostname,dimension5:this.u.pathname,groups:"audigent",send_page_view:!1})}catch(t){console.error(t)}}ListenerIterator(t,e){Array.prototype.forEach.call(this.d.querySelectorAll(t),s=>{this.ListenerAttacher({input:s,method:e})})}ListenerAttacher(t){const{input:e,method:s}=t;e!=null&&(e.addEventListener?e.addEventListener("mousedown",s.bind(this),!1):e.attachEvent&&e.attachEvent("mousedown",s))}GlobalListenerHandler(t){this.GlobalHandlers[t.type].forEach(e=>{if(t.target.matches(e.selector))e.method(t);else{let s=t.target,n=!1;for(;s.parentElement&&!n;)s=s.parentElement,n=s.matches(e.selector),n&&e.method(pt(H({},t),{target:s}))}})}GlobalListenerAttacher(t,e,s){typeof t=="string"&&(t=[t]),t.forEach(n=>{this.GlobalHandlers[n]=this.GlobalHandlers[n]||[],this.GlobalHandlers[n].push({selector:e,method:s}),document.addEventListener?(document.removeEventListener(n,window.au.l),document.addEventListener(n,window.au.l)):document.attachEvent&&(document.detachEvent(n,window.au.l),document.attachEvent(n,window.au.l))})}sendOffsiteClick(t){const{url:e}=t;q(`${it}/api/v1/off-site-click/${this.auvars.p}?tagger_id=${this.auvars.t}&url=${e}`)}clickHandler(t){let e=t.currentTarget.getAttribute("href");e!==null&&this.internalLinks.includes(this.u.hostname)&&this.sendSPAPageView({url:e})}sendUserBehaviour(t){const{action:e}=t,s={click_url:e,tagger_id:this.auvars.t,audigent_id:this.auvars.a,partner_id:this.auvars.p},n=new Blob([JSON.stringify(s)],{type:"application/json"});this.w.navigator.sendBeacon(`${et}/api/v1/ubh`,n)}behavior(t){const e=encodeURIComponent(`${this.u.protocol}//${this.u.hostname}${this.u.pathname}__audigent-behavior-${t.action}${this.u.search}${this.u.hash}`);this.sendOffsiteClick({url:e}),this.sendGAEvent({eventCategory:"audigent-behavior",eventAction:t.action,eventLabel:this.auvars.t})}sendEvent(t){let{event:e,events:s,type:n}=t;if(e=e||s,!e){if(!n)return null;e=H({},t),delete e.category,delete e.partnerId}const a={tagger_id:this.auvars.t,partner_id:this.auvars.p,audigent_id:this.auvars.a,events:Array.isArray(e)?e:[e]};let o=new XMLHttpRequest,i=`${et}/api/v1/event`;return o.open("POST",i,!0),o.setRequestHeader("Content-type","application/json"),o.send(JSON.stringify(a)),""}sendGAEvent(t){const{eventCategory:e,eventAction:s,eventLabel:n,skipSQS:a}=t;this.auvars.ga4===!0&&audGtag("event",e,{eventAction:s,eventLabel:n}),a||this.sendEvent({event:{type:e,eventAction:s,eventLabel:n}})}sendConsent(t){const{consented:e,consentType:s,consentString:n}=t,a="consent_"+s.toLowerCase(),o=this.dataStore.get("consent_"+t.consentType.toLowerCase());if(o&&n==o)return;this.dataStore.set(a,n||"n/a",w);const i={audigent_id:this.auvars.a,tagger_id:this.auvars.t,partner_id:this.auvars.p,consented:e,consent_type:s,consent_string:n},g=new Blob([JSON.stringify(i)],{type:"application/json"});return this.w.navigator.sendBeacon(`${et}/api/v1/con`,g),""}pixels(){const t=`${ut}/api/v1/getpixels?tagger_id=${this.auvars.t}&url=${encodeURIComponent(this.u.href)}&code='none'`;M(t,!0)}sendSPAPageView(t){let{url:e}=t;if(e){e.startsWith("//")&&(e="http://"+e),(e.startsWith("/")||!e.includes("://"))&&(e=this.u.protocol+"//"+this.u.host+(e.startsWith("/")?"":"/")+e);try{let s=new URL(e);s.host===this.u.host&&(this.sendOffsiteClick(s.href),this.sendPageView())}catch(s){}}}tags(t){return!1}conversion(t){return!1}sendPageView(t){this.randNum=Math.random();const e=this.setupTaggerId(),s=1*new Date,n={event_timestamp:s,url:this.u.href,referrer:this.d.referrer,partner_id:this.auvars.p,tagger_id:this.auvars.t,audigent_id:this.auvars.a,session_id:this.auvars.s,p_s_f:this.psf};this.auvars.h&&(n.hadron_id=this.auvars.h);const a=(t==null?void 0:t.data)||{},o={category:"pageView",version:"v2",created_at:s,properties:H(H({},n),a)};let i=new XMLHttpRequest,g=`${it}/api/v1/collect`;i.open("POST",g,!0),i.withCredentials=!0,i.setRequestHeader("Content-type","text/plain"),i.send(this.w.btoa(JSON.stringify(o))),this.pixels(),this.sendDecoratorRecord(),this.auvars.ga4===!0&&(audGtag("set",{dimension7:e,send_to:Z}),(this.randNum>=.95||["158"].includes(this.auvars.p.toString())&&this.randNum>=.8||["220"].includes(this.auvars.p.toString())&&this.randNum>=.5)&&audGtag("event","page_view",{dimension7:e,send_to:Z}))}beopEvent(t){const e=t.partnerId||this.auvars.p;this.sendEvent({event:pt(H({},t.data||{}),{partner_id:e,type:"beop"})})}trackEvent(t){return!1}DispatchEvent(t){const{eventName:e}=t,n=(a=>{if(typeof window.CustomEvent=="function")return new CustomEvent(a);const o={bubbles:!1,cancelable:!1,detail:void 0},i=document.createEvent("CustomEvent");return i.initCustomEvent(a,o.bubbles,o.cancelable,o.detail),i})(e);window.dispatchEvent(n)}optout(){q(`${lt}/api/v1/optout?au_id=${this.auvars.a}`)}setupInPageTaxonomy(t){const e=this,s=this.dataStore.get("seg");if(s!=null){It(e.w,e.d,s,t),Rt(this,ct,gt).call(this,s);return}let n=new URL(`${at}/api/v1/segments`);if(n.searchParams.set("url",encodeURIComponent(this.u.href)),n.searchParams.set("partner_id",this.auvars.p),this.auvars.t!==void 0)n.searchParams.set("tagger_id",this.auvars.t);else{const o=this.setupTaggerId();n.searchParams.set("tagger_id",o)}n.searchParams.set("au_id",this.auvars.a);let a=new XMLHttpRequest;a.timeout=1e4,a.onload=function(){var o;if(a.readyState==XMLHttpRequest.DONE&&a.status==200){const i=JSON.parse(a.response);It(e.w,e.d,i,t),e.dataStore.set("seg",i,y*6),Rt(o=e,ct,gt).call(o,s)}},a.ontimeout=function(){console.log("[Audigent] Taxonomy Service > Timeout")},a.onerror=function(){console.log("[Audigent] Taxonomy Service > Invalid Response")},a.open("GET",n,!0),a.send()}addUserIdentity(t){if(!t)return!1;const{identityType:e,identityValue:s}=t;if(e===void 0||s===void 0)return!1;if(e==="email"){const n=window.btoa(s);return this.sendEvent({event:{type:"e",value:n}})}else return this.sendEvent({event:{type:"u",[e]:s,identityType:e,identityValue:s}})}addUserEmailAddress(t){if(!t)return!1;const{identityValue:e}=t;if(e===void 0)return!1;let s=e.toLowerCase().trim();if(s.endsWith("@gmail.com")){let a=s.split("@")[0];a=a.split("+")[0],a=a.replace(/\./g,""),s=a+"@gmail.com"}const n=x()(s).toString();return this.addUserIdentity({identityType:"hem_sha256",identityValue:n})}addUserProperty(t){if(!t)return!1;const{propertyName:e,propertyValue:s}=t;return e===void 0||s===void 0?!1:e==="email"?this.addUserIdentity({identityType:"email",identityValue:s}):this.sendEvent({event:{type:"user.property",propertyName:e,propertyValue:s}})}}dt=new WeakMap,ct=new WeakSet,gt=function(r){const t=(r==null?void 0:r.segments)||[];if((t.length>0||this.auvars.p=="584")&&this.randNum>=.9){const e={tagger_id:this.auvars.t,partner_id:this.auvars.p,audigent_id:this.auvars.a,segment_ids:t.length>0?t.join("|"):null},s=new Blob([JSON.stringify(e)],{type:"application/json"});return this.w.navigator.sendBeacon(`${et}/api/v1/segs`,s),!0}return!1};const ee=te;var re=Object.defineProperty,ne=Object.defineProperties,se=Object.getOwnPropertyDescriptors,qt=Object.getOwnPropertySymbols,ae=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable,mt=(r,t,e)=>t in r?re(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,Ht=(r,t)=>{for(var e in t||(t={}))ae.call(t,e)&&mt(r,e,t[e]);if(qt)for(var e of qt(t))ie.call(t,e)&&mt(r,e,t[e]);return r},Mt=(r,t)=>ne(r,se(t)),X=(r,t,e)=>mt(r,typeof t!="symbol"?t+"":t,e);class oe{constructor(t,e,s){X(this,"lineItemsContain",n=>this.lineItemIds.map(a=>a.toString()).includes((n||"").toString())),X(this,"setJWPlayerListener",()=>{window.jwplayer&&(window.jwplayer().on("adImpression",this.readJWPlayerImpression),window.jwplayer().on("adComplete",n=>this.readJWPlayerImpression(n,!0)))}),X(this,"readJWPlayerImpression",(n,a)=>{var o;window.auvars[this.auvars.p].jwp_impressions=window.auvars[this.auvars.p].jwp_impressions||[],window.auvars[this.auvars.p].jwp_impressions.push(n);const i="",g="",b=n.viewable,C=n.viewable,k=`jwplayer-${n.placement}`,{pageTop:c,pageBot:u,slotMiddle:d}=this.determineViewability(window.jwplayer().getContainer())||{},l=((o=n==null?void 0:n.ima)==null?void 0:o.ad)||{},v=(l==null?void 0:l.data)||(l==null?void 0:l.g)||{};(v.adWrapperIds||[]).forEach((E,_)=>{const G=E,R=v.adWrapperCreativeIds[_],I=v.mediaUrl,_t={advertiser_id:i,campaign_id:g,line_item_id:G,creative_id:R,ad_slot_id:k,creative_blob:I,viewable:b,inViewPercentage:C,pageTop:c,pageBot:u,slotMiddle:d,event:"jwplayerAdImpression"};this.adSlots[k]=_t,window.au.push({category:"sendEvent",events:[Mt(Ht({type:"jwp_impression"},_t),{jwpType:n.type||""})]}),v.adWrapperSystems[_]==="GDFP"&&this.lineItemsContain(E)&&!a&&this.sendAdSlotInformation(_t)})}),X(this,"getAdSlotPayload",n=>{if(!n)return!1;const{advertiserId:a,campaignId:o,lineItemId:i,creativeId:g}=n.getResponseInformation()||{},b=document.getElementById(n.getSlotElementId()),C="",{pageTop:k,pageBot:c,slotMiddle:u,viewable:d,inViewPercentage:l}=this.determineViewability(b)||{};return{advertiser_id:a,campaign_id:o,line_item_id:i,creative_id:g,ad_slot_id:n.getAdUnitPath(),creative_blob:C,viewable:d,inViewPercentage:l,pageTop:k,pageBot:c,slotMiddle:u}}),X(this,"collectAndSendGoogleAdSlot",(n,a)=>{const o=this.getAdSlotPayload(n)||{};return o.event=a,this.adSlots[o.ad_slot_id]=o,this.sendAdSlotInformation(o),!0}),X(this,"determineInViewPercentage",(n,a)=>{let o=0;return n.top>=0&&n.bottom<=a&&(o=1),n.top<0&&n.bottom>0&&n.bottom<=a&&(o=n.bottom/n.height),n.top>=0&&n.top<=a&&n.bottom>a&&(o=(a-n.top)/n.height),Math.round(o*100)}),X(this,"determineViewability",n=>{const a=window.scrollY,o=window.innerHeight,i=a+o;let g=-1,b=0,C=b>=50;if(n){const k=n.getBoundingClientRect();g=Math.round(k.top+k.height/2),b=this.determineInViewPercentage(k,o),C=b>=50}return{pageTop:a,pageBot:i,slotMiddle:g,viewable:C,inViewPercentage:b}}),X(this,"compareVisiblePercentage",(n,a,o)=>{const i=n.getAdUnitPath();this.adSlots[i]?this.adSlots[i].inViewPercentage<50&&a>=50&&this.collectAndSendGoogleAdSlot(n,o):this.collectAndSendGoogleAdSlot(n,o)}),X(this,"setGoogleEventListener",()=>{window.googletag=window.googletag||{cmd:[]},window.googletag.cmd.push(()=>{window.googletag.pubads().addEventListener("slotRenderEnded",n=>{this.collectAndSendGoogleAdSlot(n.slot,"slotRenderEnded")})}),window.googletag.cmd.push(()=>{window.googletag.pubads().addEventListener("slotOnload",n=>{this.collectAndSendGoogleAdSlot(n.slot,"slotOnload")})}),window.googletag.cmd.push(()=>{window.googletag.pubads().addEventListener("impressionViewable",n=>{this.collectAndSendGoogleAdSlot(n.slot,"impressionViewable")})}),window.googletag.cmd.push(()=>{window.googletag.pubads().addEventListener("slotVisibilityChanged",n=>{this.compareVisiblePercentage(n.slot,n.inViewPercentage,"slotVisibilityChanged")})})}),X(this,"getCurrentGoogleAdSlots",()=>{const n=window.googletag&&window.googletag.pubads&&window.googletag.pubads().getSlots();return n?(n.forEach(a=>this.collectAndSendGoogleAdSlot(a,"pageLoad")),!0):!1}),X(this,"sendAdSlotInformation",n=>{if(!this.orderIds.includes(n.campaign_id)&&!this.lineItemsContain(n.line_item_id))return!1;const a=Mt(Ht({},n),{audigent_id:this.auvars.a,tagger_id:this.auvars.t,partner_id:this.auvars.p,visit_id:this.auvars.visit_id,partner_site_host:window.location.hostname,partner_site_path:window.location.pathname});window.auvars[this.auvars.p].ad_slot_events=window.auvars[this.auvars.p].ad_slot_events||[],window.auvars[this.auvars.p].ad_slot_events.push(a);const o=new XMLHttpRequest,i=`${et}/api/v1/otp/dfp`;return o.open("POST",i,!0),o.setRequestHeader("Content-type","application/json"),o.send(JSON.stringify(a)),o}),this.auvars=t,this.adSlots={},this.orderIds=e||[],this.lineItemIds=s||[],this.getCurrentGoogleAdSlots(),this.setGoogleEventListener()}}const de=oe;var Ee=W(116);function ce(r,t){const e="158";let s=r.au&&Array.isArray(r.au)?[...r.au]:[];r.auvars.autag_objs=[...(r.auvars.autag_objs||[]).filter(n=>n!=="autag"),"autag"],r.au={push:(...n)=>{r.auvars.autag_objs.forEach(a=>Object.values(r[a]||{}).forEach(o=>o.push(...n)))},l:n=>{r.auvars.autag_objs.forEach(a=>Object.values(r[a]||{}).forEach(o=>o.GlobalListenerHandler(n)))},init:()=>{r.auvars[e].hist=r.auvars[e].hist||[];const n=r.auvars[e].hist.slice(-1)[0];r.autag=r.autag||{},(!r.autag[e]||n!==r.location.href)&&(r.auvars[e].hist.push(r.location.href),r.autag[e]=t({auvars:r.auvars[e]}))}},r.au.init(),s.forEach(n=>r.au.push(n))}docReady(()=>window.au.push({category:"docReady"}));var ue=Object.defineProperty,le=Object.defineProperties,he=Object.getOwnPropertyDescriptors,Vt=Object.getOwnPropertySymbols,pe=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable,yt=(r,t,e)=>t in r?ue(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,wt=(r,t)=>{for(var e in t||(t={}))pe.call(t,e)&&yt(r,e,t[e]);if(Vt)for(var e of Vt(t))fe.call(t,e)&&yt(r,e,t[e]);return r},Ut=(r,t)=>le(r,he(t)),ge=(r,t,e)=>yt(r,typeof t!="symbol"?t+"":t,e);class ve extends ee{constructor(t){super(t),ge(this,"checkJW",()=>this.jwp?(window.clearInterval(this.jwpInterval),null):(window.jwplayer&&(this.jwp=!0,this.smartOtpDfp.setJWPlayerListener()),null)),this.tagsReader(),this.auvars.visit_id=x()(`${this.auvars.a}-${this.auvars.p}-${Date.now()}`).toString(),this.orderIds=[2900055810,2800288231,2891350216,2430343433,2877953001,2776381195,2841579083,2914646399,2811709422,2926983725,2796335699,2884513845,2829955320,2903841116,2733074813,2697661630,2792713087,2921587863,2939321473,2938145417,2947289709,2959018529,2956847257,2956205941,2958816444,2970924710,2972735884,2983676295,2994581224,2983439165,2991963287,3003612211,3028254224,3029976933,3032140244,3038913241,3034810542,2980079696,3073088604,3079108697,3089527339,3075341921,3150448250,3098451535,3113785080,3201949431,3194669712,3207760019,3214762549,3209458972,3219912403,3234412535,3253098606,3252727333,3253469729,3255205111,3263607100,3260923330,3264020863,3267059893,3268976762,3269601010,3271897640,3343579169,3353730232,3253065077,3242703809,3530992455,3532992876,3531555334,3532177864,3535506658,3535602842,3548140975,3545901268,3569419584,3592056686,3592533493,3595161349,3595068677,3631212408,3679323811,3694293311,3694293311,3694294079,3694294013,3694294463],this.lineItemIds=["5837159488","5571436280","5783448216","5570139759","5783448225","5570139741","5761545988","5838772240","5785369187","5784798379","5835922698","5784798388","5837159503","5784798376","5785369859","5837159494","5839420556","5785369856","5570139747","5784798370","5785369853","5699466638","5570139750","5823087115","5838769909","5837159491","5788427160","5837159506","5835922689","5570139753","5571256462","5835922692","5784798385","5835922695","5838772237","5570139756","5823087109","5785369199","5785369193","5783448219","5823087118","5732727358","5571436277","5784798391","5779072942","5823087112","5838772246","5775108648","5823087103","5838772243","5785369184","5823087106","5732728285","5837159497","5784798373","5785369190","5785369196","5837159500","5790369275","5570139744","5784798382","5784798394","5783448222","5837159485","5837500044","5864800215","5864800221","5864800224","5866713284","5864800227","5864800230","5864800233","5864800236","5866042051","5866713287","5863568100","5863568103","5863568106","5863568109","5863568112","5863568115","5863568313","5863568316","5863568319","5864823262","5864823268","5863568097","5863568136","5863568139","5863568301","5863568304","5863568307","5863568310","5863568118","5863568121","5863568124","5863568127","5863568130","5863568133","5865821662","5893449075","5966923345","5966925760","5967431645","5967445127","5966923342","5966925265","5966925268","5966925271","5966925757","5966925763","5966925766","5966925769","5967431648","5967448694","5967448697","6308957647","6321323944","6321335251","6319186044","6319186023","6319186293","6321334972","6321335413","6321335449","6321335476","6321335680","6321930437","6321930458","6351603345","6402338322","6509316876","6511558030","6511687594","6511811675","6700247472","6793047537","6793047570","6793048296","6793048476","6796446380","6796442831","6796445708","6796054756","6796054768","6796054774","6796055917","6806418228","6806418225","6806981200","6829336271","6861132386","6825932148","6860012134","6861132395","6853501324","6853502092","6831392357","6827876331","6831392396","6831392531","6831392546","6825932145","6829336262","6886739423","6901846758","6905567432","6905566784","6905553539","6905567435","6905567258","6905567723","6905566952","6904528708","6904528711"],this.jwp=!1}docReady(){super.docReady(),this.smartOtpDfp=new de(this.auvars,this.orderIds,this.lineItemIds),window.jwplayer?(this.jwp=!0,this.smartOtpDfp.setJWPlayerListener()):this.jwpInterval=window.setInterval(this.checkJW,100)}sendEcommerceEvent(t){const{type:e,data:s}=t,n=new N;window.addEventListener("aupixels",()=>{n.updatePixels()});const a="Fandom";if(!e||!s)return!1;if(e==="add"||e==="add_to_cart"){const o=Ut(wt({},s),{brand:s.brand||a});n.sendAddProductEventToGA(o);const i={event:"addToCart",data:o};window.au.push({category:"behavior",action:"purchase-intent"}),n.profilerServiceRequest(i)}if(e==="transaction"){const o=Ut(wt({},s),{id:`${s.orderId}-${this.auvars.t}`,affiliation:s.brand||a});let i=o.items||[];i.length&&(i=i.map(g=>({id:g.productId||"",name:g.name||"",brand:g.brand||a,price:g.price||0,quantity:g.quantity||1}))),this.sendEvent({events:[wt({type:"purchase"},s)]}),n.appendPageLoadPixelCheck("transaction"),n.sendAllProductsInTransactionToGA(i,()=>n.sendTransactionEventToGA(o)),window.localStorage.setItem("autx",JSON.stringify([...JSON.parse(window.localStorage.getItem("autx")||"[]"),s.orderId]))}return null}tagsReader(){let t=new Set,e={};const s=[],n=[],a=this.d.querySelectorAll("div[data-gpt-page-params]"),o={gnre:["genre",!0,!0],genre:["genre",!1,!0],subgenre:["subgenre",!1,!0],tv:["tv",!0,!1],media:["media",!0,!1],s0:["vertical",!0,!1],s0c:["category",!0,!1],esrb:["esrb",!0,!1],pform:["platform",!0,!1],pub:["publisher",!0,!1],theme:["content theme",!0,!1],main_vertical:["main_vertical",!1,!0],fran:["franchise",!1,!0],vertical:["other_vertical",!1,!0]};if(s.push((((window.ads||{}).context||{}).targeting||{}).wikiCategory||null),n.push((((window.ads||{}).context||{}).targeting||{}).wikiVertical||null),a.forEach(C=>{const k=JSON.parse(C.getAttribute("data-gpt-page-params"));Object.keys(o).forEach(c=>{const u=k[c]||[];if(Array.isArray(u)){const[d,l,v]=o[c];u.forEach(f=>{l&&!f.startsWith("p_")&&!f.startsWith("s_")&&t.add(`${d} > ${f}`),v&&(f.startsWith("p_")||f.startsWith("s_"))&&(c=="fran"?t.add(`${d} > ${f}`):t.add(`HELIX > ${d} > ${f}`))})}}),s.push(k.s0||null),n.push(k.s0v||null)}),t=Array.from(t).map(C=>C.toUpperCase()),e.primaryCategory=Array.from(new Set(s.filter(C=>C>""))).join(),e.pageType=Array.from(new Set(n.filter(C=>C>""))).join(),this.u.hostname.match(/(gamespot\.com|giantbomb\.com|metacritic\.com|tvguide\.com)$/gi)==null){this.push({category:"writeDecoratorRecord",tags:t,decor_dict:e});return}const i=this.d.querySelector('meta[name="adtags"]');if(i==null){this.push({category:"writeDecoratorRecord",tags:t,decor_dict:e});return}const g={genre:"GENRE",gnre:"GENRE",productGenre:"GENRE",game:"GAME",franchise:"FRANCHISE",con:"PLATFORM",pform:"PLATFORM",network:"TV",tv:"TV",ptype:"PAGE TYPE"};new URLSearchParams(i.getAttribute("content")).forEach((C,k)=>{if(C.indexOf("|")>-1)return;const c=g[k];if(c){let u=!0;k==="ptype"&&(this.u.hostname.match(/gamespot\.com/gi)!=null&&["reviews_door","entertainment_reviews_door","review"].includes(C)||this.u.hostname.match(/metacritic\.com/gi)!=null&&["critic_reviews","user_reviews"].includes(C)?C="REVIEWS":u=!1),u&&(t=[...t,...C.split(",").filter(d=>(typeof d=="string"||d instanceof String)&&d.trim().length>0&&d!=="undefined").map(d=>`N&R > ${c} > ${d.trim()}`.toUpperCase())])}}),this.push({category:"writeDecoratorRecord",tags:t,decor_dict:e})}}(function(r){ce(r,function(t){return new ve(t)})})(window)})()})();})();