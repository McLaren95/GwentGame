var Gt=Object.defineProperty;var $t=(e,t,n)=>t in e?Gt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var y=(e,t,n)=>$t(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const zt="/assets/ab-DWUCLfjz.png",Yt="/assets/abp-B-IR2hZz.png",jt="/assets/adguard-5fYuaDe3.png",Xt="/assets/brave-CptCdM5a.png",Jt="/assets/bt-logo-CioIXMoh.svg",Qt="/assets/bt-rlink-storage-rS0I3h2U.html",Zt="/assets/close-pUUxwf_B.svg",en="/assets/opera-Bw-jHxyw.png",tn="/assets/ublock-origin-uCPCPquD.png",nn="/assets/ublock-J9bayp5W.png",rn=e=>new URL(Object.assign({"./ab.png":zt,"./abp.png":Yt,"./adguard.png":jt,"./brave.png":Xt,"./bt-logo.svg":Jt,"./bt-rlink-storage.html":Qt,"./close.svg":Zt,"./opera.png":en,"./ublock-origin.png":tn,"./ublock.png":nn})[`./${e}`],import.meta.url).href,on="modulepreload",sn=function(e){return"/"+e},Fe={},an=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),a=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=sn(c),c in Fe)return;Fe[c]=!0;const u=c.endsWith(".css"),_=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${_}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":on,u||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),u)return new Promise((h,L)=>{d.addEventListener("load",h),d.addEventListener("error",()=>L(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return i.then(s=>{for(const a of s||[])a.status==="rejected"&&o(a.reason);return t().catch(o)})},cn="https://ad-delivery.net/px.gif?ch=2",ln="https://ad.doubleclick.net/favicon.ico?ad=300x250&ad_box_=1&adnet=1&showad=1&size=250x250",un="https://ad-delivery.net/px.gif?ch=1&e="+Math.random();let J=null;async function dn(){return Promise.all([hn(),gn()]).then(e=>(window.__bt_intrnl.aaDetectionResults={ab:e[0],acceptable:e[1]},window.__bt_intrnl.aaDetectionResults)).catch(e=>{throw new Error("AA Detection failed",{cause:e})})}async function fn(){return window.__bt_intrnl.aaDetectionResults?window.__bt_intrnl.aaDetectionResults:J||(J=dn(),J)}async function hn(){const[e,t]=await Promise.all([me(cn),me(ln)]),n=_n();return(e?n||t:n&&t)||!1}async function gn(e=un){return!await me(e)}async function me(e){if(await mn(e))return!0;try{const n=await fetch(e);if(n.redirected&&n.url==="data:text/plain;base64,Cg==")throw new Error("Extension driven redirect detected");return!1}catch{return!0}}function _n(){const e=document.createElement("div");e.innerHTML="&nbsp;",e.className="ads ad adsbox doubleclick ad-placement carbon-ads adglare",e.setAttribute("id","bt-bait-element"),e.style.cssText="width: 1px !important; height: 1px !important; position: absolute !important; left: -5000px !important; top: -5000px !important;";try{(window.document.body||window.document.documentElement).appendChild(e);const t=document.getElementById("bt-bait-element");if(t.offsetHeight===0||t.clientHeight===0)return Q(e),!0;if(window.getComputedStyle!==void 0){const n=window.getComputedStyle(t,null);if(n&&(n.getPropertyValue("display")==="none"||n.getPropertyValue("visibility")==="hidden"))return Q(e),!0}}catch{return Q(e),null}return Q(e),!1}function mn(e,t="img"){return new Promise(n=>{const r=document.createElement(t);r.style.setProperty("display","none","important"),r.style.setProperty("width","1px","important"),r.style.setProperty("height","1px","important");let i=!1;function o(s){i||(i=!0,n(s))}r.addEventListener("error",function(){o(!0)}),r.addEventListener("load",function(){o(!1)}),r.src=e,(window.document.body||window.document.documentElement).appendChild(r)})}function Q(e){(window.document.body||window.document.documentElement).removeChild(e)}const ot=()=>[{key:"bt_mwr",val:"true"},{key:"rl_wid",val:G}],pn=()=>{wn(),En()},wn=()=>{const e=st();return e.length===0?!1:(e.forEach(t=>{bn(t)}),!0)},st=()=>window._pbjsGlobals?window._pbjsGlobals.map(e=>window[e]).filter(Boolean).map(vn):[],bn=e=>{ot().forEach(n=>{var r,i,o;(o=(i=(r=e==null?void 0:e.bidderSettings)==null?void 0:r.standard)==null?void 0:i.adserverTargeting)==null||o.push(yn(n.key,n.val))})},vn=e=>{var t,n,r;return e.bidderSettings={...e.bidderSettings,standard:{...(t=e.bidderSettings)==null?void 0:t.standard,adserverTargeting:[...((r=(n=e.bidderSettings)==null?void 0:n.standard)==null?void 0:r.adserverTargeting)||[]]}},e},yn=(e,t)=>({key:e,val:()=>t}),En=()=>{var e,t;(t=(e=window.googletag)==null?void 0:e.cmd)==null||t.push(function(){ot().forEach(r=>{window.googletag.pubads().setTargeting(r.key,r.val)})})},at=new Proxy(new URLSearchParams(window.location.search),{get:(e,t)=>{const n=e.get(t);return n==="true"?!0:n==="false"?!1:n}}),An=at.bt_env||"prod",M=at.preview??!1;async function U(e){if(M)return;const t={pageURL:window.location.href,"abtest-presentation-version":window.__bt_tag_am.settings.view};return Sn({traceID:Dt,sessionID:Ct,orgID:Number(K),websiteID:Number(G),scriptVersion:"946afcb-am",scriptLoadingMode:window.__bt_rlink_loaded_from_tag?"inject_from_tag_script":"standalone",...e,meta:"meta"in e?{...t,...e.meta}:t})}async function Sn(e){return fetch(`https://${O}/events/mw`,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"},mode:"no-cors",keepalive:!0})}const Rn="chrome-extension://gighmmpiobklfepjocnamgkkbiglidom/icons/ab-19.png",kn="https://ad-delivery.net/px.gif?ch=2",xn="https://ad.doubleclick.net/favicon.ico?ad=300x250&ad_box_=1&adnet=1&showad=1&size=250x250",In="https://ad-delivery.net/px.gif?ch=1&e="+Math.random();async function Pn(){try{return(await fetch(new Request(Rn))).ok?"ab":void 0}catch{return}}async function Tn(){try{const e=navigator.userAgent;if(e.includes("OPR/")||e.includes("Opera/")||window.opr!==void 0)return"opr"}catch{return}}async function Ln(){try{const e=await fetch(new Request(`https://${Mi}/webfonts43j533.js`));return!e.ok&&e.status===404?null:void 0}catch{return"ublock"}}async function Dn(){for(const e of[kn,xn,In])try{const t=await fetch(e);if(t.redirected&&t.url==="data:text/plain;base64,Cg==")return"ublockorigin"}catch{continue}}async function Cn(){try{if(navigator.brave!==void 0&&navigator.brave.isBrave.name==="isBrave")return"brave"}catch{return}}async function Mn(){const[e,t,n,r,i]=await Promise.all([Pn(),Tn(),Ln(),Cn(),Dn()]);return e||t||n||r||i||"unknown"}var f=(e=>(e.Session="session",e.Local="local",e))(f||{}),b=(e=>(e.Get="get-data",e.Set="set-data",e.Delete="remove-data",e))(b||{}),ye=(e=>(e.GetStatus="get-extension-status",e.Allowlist="allowlist-website",e))(ye||{}),ae=(e=>(e.Storage="storage",e.Extension="extension",e))(ae||{}),re=(e=>(e.Detected="extension-detected",e.ApiStatus="extension-api-status",e))(re||{});const Un="tid",Bn="cv",On="sid",ct={};function We(e,t){ct[e]=t}async function w(e,t={},n={severity:1}){var c;if(M)return;const r={[Un]:Dt,[Bn]:((c=window.__bt_tag_d)==null?void 0:c.version)||"",[On]:Ct,upapi:String(!0)},i={...ct,...t},o={event:e,meta:i,orgID:K,severity:n.severity,websiteID:G},s=new URLSearchParams(r),a=new URL(`https://${O}/log?`+s);return fetch(a,{method:"POST",body:JSON.stringify(o),keepalive:!0}).catch(()=>null)}function Nn(e){return Math.floor(Math.random()*Math.floor(e))}function B(e=1){return Nn(100)<e}const lt=rn("bt-rlink-storage.html"),ut="bt-rlink-iframe",Ve=5e3;let v=null,V=null;const Hn=new Map;let qe=!1;const dt=e=>{try{const t=window.location.origin,n=new URL(lt).origin;return e===t||e==="https://cdn.btmessage.com"||e==="https://cdn.btmessage-dev.com"}catch{return!1}},Fn=()=>new Promise((e,t)=>{v=document.createElement("iframe"),v.src=lt,v.id=ut,v.style.display="none",document.body.appendChild(v),v.onload=()=>{e(v)},v.onerror=()=>{v=null,V=null,t(new Error("Failed to load iframe"))}}),Wn=()=>{qe||(window.addEventListener("message",e=>{var t;if(dt(e.origin)&&(t=e.data)!=null&&t.type&&typeof e.data.type=="string"){const n=Hn.get(e.data.type);n&&n.forEach(r=>r(e.data))}}),qe=!0)},Vn=async()=>{if(v)return v;const e=document.getElementById(ut);if(e)return v=e,v;if(V)return V;try{return V=Fn(),v=await V,Wn(),v}catch(t){throw v=null,V=null,t}},Ee=async e=>{const t=await Vn();if(!t.contentWindow)throw new Error("Iframe not initialized properly");return new Promise((n,r)=>{let i=!1,o=null;const s=u=>{var d;if(!dt(u.origin))return;const _=e.messageType==="storage"?"bt-rlink-storage":"bt-rlink-extension";if(((d=u.data)==null?void 0:d.source)===_){i=!0;const h=u.data;h.status==="success"?(a(),n(h.value)):h.status==="error"?(a(),r(new Error(h.error||"Request failed"))):(a(),r(new Error(`Unexpected response status: ${h.status}`)))}},a=()=>{window.removeEventListener("message",s),o!==null&&(clearTimeout(o),o=null)},c=e.action==="allowlist-website"?Ve*2:Ve;o=window.setTimeout(()=>{i||(a(),r(new Error("Iframe response timeout")))},c),window.addEventListener("message",s);try{if(!t||!t.contentWindow)throw new Error("Iframe not initialized properly");t.contentWindow.postMessage(e,"*")}catch{a(),r(new Error("Failed to send message to iframe"))}})};async function ft(e){try{return await Ee({...e,trustedRLEvent:!0,messageType:ae.Storage})}catch(t){w("rlink.storageError",{action:e.action,key:e.key,error:t instanceof Error?t.message:t},{severity:4});return}}const m=ht(f.Local),p=ht(f.Session);function ht(e){const t=e===f.Local?localStorage:sessionStorage,n=(r,i)=>{try{return r()}catch(o){return B()&&w("rlink.storageError",{error:o instanceof Error?o.message:o},{severity:4}),i}};return{get:r=>n(()=>t.getItem(r),void 0),set:(r,i)=>n(()=>t.setItem(r,i),void 0),remove:r=>n(()=>t.removeItem(r),void 0)}}const T=async(e,t)=>ft({action:b.Get,storageType:e,key:t}).then(n=>n),S=async(e,t,n,r)=>{const i=t===f.Local?m:p;return e===b.Delete?i.remove(n):e===b.Set&&i.set(n,r),ft({action:e,storageType:t,key:n,value:r}).then(()=>null)},E="BT_AM_SOFTWALL_RENDERED";async function po(){const e=p.get(E)==="true";return e||T(f.Session,E).then(t=>(t&&p.set(E,t),t==="true")).catch(()=>!1)}async function qn(e){if(window.__bt_intrnl.recoveryUserAttr)return window.__bt_intrnl.recoveryUserAttr.mwRendered;const t=!!m.get(E);return t||T(f.Local,E).then(n=>{const r=!!n;if(n)m.set(E,n);else if(!r&&e.enabled){let i=!1;return $r().then(()=>{var o,s;return i=!!m.get(E),i||((s=(o=window.__bt_intrnl)==null?void 0:o.recoveryUserAttr)==null?void 0:s.mwRendered)}).catch(()=>!1).finally(()=>{i&&U({event:"restored-from-server",detectedExtension:"unknown"}).catch(()=>null)})}return r})}async function Ae(){const e=m.get(E);return e?new Date(e):T(f.Local,E).then(t=>{if(t)return m.set(E,t),new Date(t)}).catch(()=>{})}const wo=async()=>(await Kn(),It()),Kn=()=>Promise.all([S(b.Set,f.Session,E,"true"),S(b.Set,f.Local,E,new Date().toUTCString())]),Gn=e=>{m.set(E,new Date(e).toUTCString())},gt=()=>Promise.all([S(b.Delete,f.Session,E),S(b.Delete,f.Local,E)]),D="BT_AM_SOFTWALL_DISMISSED";async function $n(){const e=p.get(D);return e?Ke(e):T(f.Session,D).then(t=>{if(t)return p.set(D,t),Ke(t)}).catch(()=>{})}async function zn(){return p.get(D)?!0:T(f.Session,D).then(e=>e?(p.set(D,e),!0):!1).catch(()=>!1)}const Yn=e=>S(b.Set,f.Session,D,JSON.stringify(e)),_t=()=>S(b.Delete,f.Session,D);function Ke(e){if(e)try{return JSON.parse(e)}catch{return}}const z="BT_AM_ATTRIBUTION_EXPIRY";async function jn(){if(window.__bt_intrnl.recoveryUserAttr)return window.__bt_intrnl.recoveryUserAttr.attributionExpiry;const e=m.get(z);return e?Number(e):T(f.Local,z).then(t=>{if(t)return m.set(z,t),Number(t)}).catch(()=>{})}const Se=async e=>S(b.Set,f.Local,z,e.toString()),Xn=async()=>S(b.Delete,f.Local,z),Re="BT_AM_SCA_SUCCEED",mt=()=>p.get(Re)==="true",bo=e=>p.set(Re,e.toString()),Jn=()=>p.remove(Re),ke="BT_AM_SOFTWALL_REDIRECT",vo=()=>p.get(ke)==="true",yo=()=>p.set(ke,"true"),Qn=()=>p.remove(ke),xe="BT_AM_SOFTWALL_BOUNCE",Zn=()=>p.get(xe)==="true",er=()=>p.set(xe,"true"),tr=()=>p.remove(xe),Ie="BT_AM_SOFTWALL_RENDER_COUNT",Pe="BT_AM_SOFTWALL_DISMISS_COUNT",pt=e=>ie(e).then(t=>nr(t+1,e));async function ie(e){const t=e==="dismiss"?Pe:Ie,n=m.get(t);return n?Number(n):T(f.Local,t).then(r=>r?(m.set(t,r),Number(r)):0).catch(()=>0)}const nr=(e,t)=>S(b.Set,f.Local,t==="dismiss"?Pe:Ie,e.toString()),wt=()=>Promise.all([S(b.Delete,f.Local,Pe),S(b.Delete,f.Local,Ie)]);async function Ge(e=!0){await Promise.all([gt(),_t(),Xn(),cr(),e?wt():Promise.resolve()]).catch(t=>{B()&&w("rlink.invalidateUserDataError",{aaResults:window.__bt_intrnl.aaDetectionResults,consentData:window.__bt_intrnl.consentData,error:t instanceof Error?t.message:t},{severity:4})}),Qn(),tr(),Jn()}async function bt(){const[e,t,n]=await Promise.all([Ae(),jn(),sr()]);if(!(!e&&!n&&!t))return{recoveryType:n,renderDate:e,attributionExpiry:t}}const C="BT_AM_SOFTWALL_RECOVERED";async function rr(){return m.get(C)?!0:T(f.Local,C).then(e=>e?(m.set(C,e),!0):!1).catch(()=>!1)}async function ir(e,t){const n=await bt();if(!n)return{swRecovered:void 0,attributionExpiry:void 0};const{renderDate:r,attributionExpiry:i,recoveryType:o}=n;let s;t.ab?t.acceptable&&!e.allow_render_to_aa_users&&(s="AA"):s="AB";const a=ur(r),c=i||Kr(e.attribution_window_days,r==null?void 0:r.getTime());return(o||!a)&&s===void 0?gt():o&&(i||Se(c)),!o&&!a?{swRecovered:void 0,attributionExpiry:void 0}:{swRecovered:s,attributionExpiry:c}}function or(e,t){if(e){if(e==="AB"){const n=mt();return(t==null?void 0:t.status)&&(t==null?void 0:t.source)==="1ca"||n?"SCA":e}return e}}async function sr(){if(window.__bt_intrnl.recoveryUserAttr)return window.__bt_intrnl.recoveryUserAttr.recoveryType;const e=m.get(C);return e||T(f.Local,C).then(t=>{if(t)return m.set(C,t),t}).catch(()=>{})}const ar=async(e,t)=>Promise.all([vt(e),Se(t),It(e,t)]).then(()=>null),vt=e=>S(b.Set,f.Local,C,e),cr=()=>S(b.Delete,f.Local,C),lr=7,ur=e=>e?dr(e)<=lr*De:!1,dr=(e,t=new Date)=>Math.abs(e.getTime()-t.getTime()),Te="BT_AM_PREMIUM_ADBLOCK_USER_DETECTED",Le="BT_AM_PREMIUM_ADBLOCK_USER_DETECTION_DATE",fe=()=>{throw m.remove(Te),m.remove(Le),new Error("invalid or inexistent premium detection data")},fr=()=>{const e=m.get(Le),t=m.get(Te);try{(!e||!t)&&fe();const n=new Date(e);Date.now()-n.getTime()>De&&fe();const r=JSON.parse(t);return(typeof r!="object"||r===null||!("isPremium"in r)||!("extensionInfo"in r))&&fe(),{isPremium:r.isPremium,extensionInfo:r.extensionInfo}}catch{return null}},hr=e=>{m.set(Te,JSON.stringify(e)),m.set(Le,new Date().toUTCString())},gr=2;async function _r(){return new Promise((e,t)=>{if(typeof(k==null?void 0:k.__tcfapi)=="function"){const n=(r,i)=>{i?e(r):t("failed to get TCData")};k.__tcfapi("addEventListener",gr,n)}t("tcfapi not found")})}const mr=e=>(e==null?void 0:e.eventStatus)==="tcloaded"?!1:(e==null?void 0:e.eventStatus)==="useractioncomplete"||(e==null?void 0:e.eventStatus)==="cmpuishown",pr=e=>{var t;return e?e.gdprApplies===!1?!0:!!(!wr((t=e.purpose)==null?void 0:t.consents)&&br(e.purpose)):!1},wr=(e={})=>!Object.values(e).some(Boolean),br=e=>[1,2,3,4,7,9,10].every(n=>{var r;return(r=e==null?void 0:e.consents)==null?void 0:r[n]}),vr=e=>{const t={tcDataDefined:!!e,gdprApplies:e==null?void 0:e.gdprApplies};return!e||e.gdprApplies===!1?{consentShownInCurrentPV:!1,isConsentGiven:!0,meta:t}:{consentShownInCurrentPV:mr(e),isConsentGiven:pr(e),meta:t}};async function yr(){return _r().then(e=>vr(e)).catch(e=>(B()&&w("rlink.getConsent",{pageURL:k.location.href,error:e},{severity:3}),{consentShownInCurrentPV:!1,isConsentGiven:!0,meta:{tcDataDefined:!1}}))}const Er=`MIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEApyRTinEzv3cHH2bn6WSF
myqzDE/Ub8Xh/jhGWsSgHiJ6A/iM9GdlEE3WDl6ITw2ssuQ1xELT2xRpP9vR8OHR
YvyMfQtsjOsvMhXuR3X5Cf2nqSEo5ShihdE2W9kXxxWqs3yx4odnan6W65rfQWal
EJ8Y5viVEckj8x65+PTsDKfNtXMEvHqqrX9SaPC5rnZuWKkPuEJJna5ux/MEHuHQ
D6SFqhtPGKUYKf16pCFLD9oh6s6XcLST8GRZ2ySgdJKTMkHOHjjPkzXxYmTC1fYD
YO/THL+c9KvCpCWDd0yA6wEVABx2m7SYZzLkYVEze4SghGYQhWXLNwtj5tVzYGn0
+FoSNd9l3KJK/ULLd0HopuqYmz6TaK53x2rnjQ19epKSinRdPskmnz9RPzxojfli
SZgTQw47d6VV8J3K5HoLHtZ8vDD+KtYDNqHgLIG5jLsQLowetQAeRHqvo+KuIlzN
hIlNNOVq+Wlfe3nSsXlZGnKkqGC/4Bc39o82G4POR8qv98DRKm/6ihQAmWP7DUK2
HTumpVCsP4FRdaE2BT5BaAdXtoLmfHw6CsBSGFY0ZRmETsIIPhs8BIZg2EDd+Y/X
0Y8npvz5k4HxbTHS6pPO4hloPRwJ2MGZWwWtI2IppR749tONgOm4FI9tjUFLMLgU
ObHdD9PpRCG9MkGls9iSadkCAwEAAQ==`,yt={name:"RSASSA-PKCS1-v1_5",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-512"}};function pe(e){if(typeof window<"u"&&window.atob)return window.atob(e);if(typeof Buffer<"u")return Buffer.from(e,"base64").toString("utf-8");throw new Error("Unable to decode base64 string: No suitable method found")}const Et=e=>new Uint8Array(Array.from(pe(e),t=>t.charCodeAt(0)));function Ar(e){return crypto.subtle.importKey("spki",Et(e),yt,!1,["verify"])}async function Sr(e,t,n){return await crypto.subtle.verify(yt,await Ar(e),t,n)}function $e(e){return Sr(Er,Et(e.signature),new TextEncoder().encode(e.encodedData))}let j=!1,Z=null;const Rr=1e3,kr=50;function At(){return window.__bt_rlink_extension_api??null}function we(e){window.__bt_rlink_extension_api=e}function Y(){return window.__bt_rlink_extension_info??null}function St(e){window.__bt_rlink_extension_info=e}async function xr(){return new Promise(e=>{const t=setTimeout(()=>{At()===null&&(window.removeEventListener("message",n),we(!1),e(!1))},Rr),n=r=>{r.data.type===re.ApiStatus&&(clearTimeout(t),we(r.data.available),e(r.data.available||!1),window.removeEventListener("message",n))};window.addEventListener("message",n)})}function Rt(){const e=Y();if(!e)return;const t=e.find(n=>n.name==="adblockplus"||n.name==="adblock");t!=null&&t.result&&(window.__bt_intrnl||(window.__bt_intrnl={}),window.__bt_intrnl.aaDetectionResults={ab:!0,acceptable:t.result.aa})}function Ir(e){try{const t=new URL(e);return t.protocol==="https:"||t.hostname==="localhost"&&t.port==="3002"}catch{return!1}}function Pr(){j||(window.addEventListener("message",e=>{if(!Ir(e.origin))return;const t=e.data;(t==null?void 0:t.type)===re.ApiStatus&&we(t.available),(t==null?void 0:t.type)===re.Detected&&t.value&&!Y()&&(St(t.value),Rt())}),j=!0)}async function ce(){return Z||(Z=(async()=>{Pr()})(),Z)}async function Tr(){j||await ce();const e=At();return e===null?xr():e}async function Lr(){j||await ce();const e=Y();if(e)return e;let t=0;const n=3;for(;t<n;)try{const r=await Ee({action:ye.GetStatus,trustedRLEvent:!0,messageType:ae.Extension});return!Y()&&r&&(St(r.value),Rt()),Y()}catch(r){if((r instanceof Error?r.message:String(r)).includes("pending")&&t<n-1){await new Promise(o=>setTimeout(o,kr)),t++;continue}return null}return null}async function Dr(){const e=await Lr();if(!e)return{detectedExtension:"unknown",extensionInfo:null};const t=e.find(r=>r.name==="adblockplus"||r.name==="adblock");return t?{detectedExtension:{adblockplus:"abp",adblock:"ab"}[t.name]||"unknown",extensionInfo:t}:{detectedExtension:"unknown",extensionInfo:null}}async function Eo(e,t){j||await ce();try{const n=await Ee({action:ye.Allowlist,payload:{expiresAt:e,signedPayload:t.signedPayload},trustedRLEvent:!0,messageType:ae.Extension});return n&&Array.isArray(n)?n.some(r=>{var i;return((i=r.result)==null?void 0:i.status)===!0}):!1}catch{return!1}}class Cr{constructor(t){y(this,"singletonDetection");y(this,"premiumBypassModeEnabled");y(this,"RLEnabled");this.RLEnabled=t.enabled,this.premiumBypassModeEnabled=t.premium_bypass_mode_enabled,this.singletonDetection=this.detectPremiumABUser()}async detectPremiumABUser(){if(this.singletonDetection!==void 0)return this.singletonDetection;if(M||!this.RLEnabled)return this.singletonDetection=Promise.resolve({isPremium:!1,extensionInfo:null}),this.singletonDetection;const t=await Tr();return this.singletonDetection=t?this.detectPremiumABUserViaExtensionApi():this.detectPremiumABUserLegacy(),this.singletonDetection}async detectPremiumABUserViaExtensionApi(){var t,n,r,i,o,s,a,c;try{const{extensionInfo:u}=await Dr(),_=u?{name:u.name,version:u.version,allowlistState:{status:((n=(t=u.result)==null?void 0:t.allowlist)==null?void 0:n.status)||!1,source:((i=(r=u.result)==null?void 0:r.allowlist)==null?void 0:i.origin)||null,oneCA:!0,aa:(o=u.result)==null?void 0:o.aa,expiresAt:(a=(s=u.result)==null?void 0:s.allowlist)==null?void 0:a.expiresAt}}:null;if(!this.premiumBypassModeEnabled||!((c=u==null?void 0:u.result)!=null&&c.license))return{isPremium:!1,extensionInfo:_};const[d,h]=u.result.license.split(".");if(!await $e({encodedData:d,signature:h}))return{isPremium:!1,extensionInfo:_};const{isPaying:N,expiresAt:W}=JSON.parse(pe(d));return{isPremium:N&&Date.now()<Number(W),extensionInfo:_}}catch(u){return console.error("Error in extension API premium detection:",u),{isPremium:!1,extensionInfo:null}}}detectPremiumABUserLegacy(){return new Promise(t=>{this.handlePreviousDetection(t)})}handlePreviousDetection(t){if(M||!this.RLEnabled){t({isPremium:!1,extensionInfo:null});return}const n=fr();if(n){t(n);return}this.fetchAndHandlePayload(t)}async fetchAndHandlePayload(t){let n=!1;const r=i=>{n||(t(i),n=!0)};try{const o=await(await fetch(`https://${O}/mw/sign_pbm?w=${G}&bt_env=${X}`)).json(),s=setTimeout(()=>{r({isPremium:!1,extensionInfo:null}),document.removeEventListener("flattr-payload",a)},1e3),a=async u=>{clearTimeout(s),document.removeEventListener("flattr-payload",a);let _=!1,d=null;if(this.premiumBypassModeEnabled&&typeof u.detail.payload=="string"){const[h,L]=u.detail.payload.split(".");try{if(await $e({encodedData:h,signature:L})){const{isPaying:W,expiresAt:H}=JSON.parse(pe(h));W&&Date.now()<Number(H)&&(_=!0)}}catch(N){console.error("Error verifying premium signature:",N)}}u.detail.extensionInfo&&(d=u.detail.extensionInfo),r({isPremium:_,extensionInfo:d})};document.addEventListener("flattr-payload",a);const c=new CustomEvent("flattr-request-payload",{detail:o});document.dispatchEvent(c)}catch{r({isPremium:!1,extensionInfo:null})}}}let he=null;async function Mr(e){return he||(he=new Cr(e)),he.detectPremiumABUser()}const kt="btUserCountry";let ge;const Ur=async()=>{let e=p.get(kt)||void 0;return e||(ge||(ge=Br()),e=await ge,e&&Or(e),e)},Br=async()=>{const e=window.__bt_tag_am.settings;try{const t=await fetch(`https://${O}/country`);if(!t.ok)throw new Error(`Request failed. Status: ${t.status}. Raw: ${await t.text()}`);const n=await t.json();if(!n.country)throw new Error(`unexpected response: ${JSON.stringify(n)}`);return n.country}catch(t){w("rlink.detectCountry",{settings:{countryList:e.country_code_list,countryMode:e.country_code_mode,renderToAA:e.allow_render_to_aa_users,singleClick:e.single_click_enabled},aaResults:window.__bt_intrnl.aaDetectionResults,countryError:t instanceof Error?t.message:t,pageURL:window.location.href},{severity:4});return}},Or=e=>{p.set(kt,e)};async function Nr(e){var a;if(!e.enabled||xt())return!1;const t=window.location.href;if((a=e.allowlisted_urls)!=null&&a.some(c=>t.startsWith(c)))return!1;const[n,r,i]=await Promise.all([Ae(),ie("render"),ie("dismiss")]);if(n&&Fr(new Date,n)<e.render_interval_days||!await Wr(e))return!1;if((e==null?void 0:e.wall_mode)===q.dynamic){if(!Vr(e.dynamic_wall_settings,r,i))return!1}else if(r<e.page_views_to_render)return pt("render"),!1;return!0}const Hr=(e,t)=>e&&(!e.ab||e.acceptable&&!t),Fr=(e,t)=>{const n=e.getTime()-t.getTime();return Math.round(n/(1e3*3600*24))};function xt(){const e=navigator.userAgent||navigator.vendor||window.opera;return e?/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)):!1}async function Wr(e){if(!e.country_code_list||e.country_code_list.length<=0)return!0;const t=await Ur();if(window.__bt_intrnl.country=t,!t)return!1;const n=e.country_code_list.includes(t.toUpperCase());return!(n&&e.country_code_mode==="excluding"||!n&&e.country_code_mode==="including")}function Vr(e,t,n){return n===0&&t===0?!0:t<e.pageviews_count?(pt("render"),!1):!0}const De=24*3600*1e3,qr=365;function Kr(e,t=Date.now()){return(!e||e<=0)&&(e=qr),t+De*e}function Gr(e){return Date.now()>e}async function It(e,t){return M?Promise.resolve():Ae().then(n=>{zr({recoveryType:e,renderDate:n||new Date,attributionExpiry:t}).catch(i=>{B()&&w("rlink.setServerSideUserStateError",{aaResults:window.__bt_intrnl.aaDetectionResults,error:i instanceof Error?i.message:i},{severity:3})})})}async function $r(){return M?Promise.resolve():fetch(`https://${O}/mw/state?bt_env=${X}`).then(e=>{if(!e.ok)throw new Error(`Server side attribution request failed. StatusCode: ${e.status}`);return e.json()}).then(e=>{const{renderDate:t,recoveryType:n,attributionExpiry:r}=e||{};window.__bt_intrnl.recoveryUserAttr=window.__bt_intrnl.recoveryUserAttr||{mwRendered:!1,recoveryType:void 0,attributionExpiry:void 0},(t||n||r)&&B()&&w("rlink.restoreServerSideAttribution",{aaResults:window.__bt_intrnl.aaDetectionResults,serverSideAttribution:e},{severity:1}),t&&(window.__bt_intrnl.recoveryUserAttr.mwRendered=!0,Gn(t)),n&&(window.__bt_intrnl.recoveryUserAttr.recoveryType=n,window.__bt_intrnl.recoveryUserAttr.attributionExpiry=r,vt(n),Se(r))}).catch(()=>null)}function zr(e){return fetch(`https://${O}/mw/state/recovered?bt_env=${X}`,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"},mode:"no-cors"})}function Yr(){let e=window;try{if(top.document)return top}catch{}try{for(;e.parent.document;)e=e.parent}catch{}return e}const k=Yr();function jr(){try{return document.location.hostname!==""&&document.location.hostname!==window.parent.location.hostname}catch{return!0}}const Xr=jr();function Jr(){try{return new URL(Xr?k.document.referrer:k.location.href)}catch{return new URL(k.location.href)}}const Qr=Jr(),Pt=(e,t)=>{const n=Gr(t);return(e==="AB"||e==="SCA")&&!n};function Zr({settings:e,aaDetectionResults:t,dismissCount:n}){const r=e.wall_mode===q.adaptive&&!t.acceptable,i=e.wall_mode===q.dynamic&&n>=e.dynamic_wall_settings.dismiss_count;return e.wall_mode===q.hard||i||r}var et;const ei=((et=window.__bt_intrnl)==null?void 0:et.timings)??{shouldLog:!1},ti=Date.now(),{shouldLog:ni}=ei;function ri(){const e="timing.rlinkScriptLoaded",t={timestamp:String(ti)};ni&&w(e,t)}const Ce=()=>{const e=[],{languages:t,language:n}=navigator;if(t)for(let r=0;r<t.length;r++)e.push(t[r]);if(n&&e.push(n),e.length>0){const r=e[0],i=r.replace("-","_").split("_");return i[0]==="zh"?ii(r):i[0].toUpperCase()}return"EN"},ii=e=>{switch(e){case"zh_TW":case"zh-TW":return"TW";default:return"ZH"}},Ao={name:"rlinkDetector",lookup(){return Ce()}};function oe(e){"@babel/helpers - typeof";return oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oe(e)}var oi=/^\s+/,si=/\s+$/;function l(e,t){if(e=e||"",t=t||{},e instanceof l)return e;if(!(this instanceof l))return new l(e,t);var n=ai(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}l.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},getLuminance:function(){var t=this.toRgb(),n,r,i,o,s,a;return n=t.r/255,r=t.g/255,i=t.b/255,n<=.03928?o=n/12.92:o=Math.pow((n+.055)/1.055,2.4),r<=.03928?s=r/12.92:s=Math.pow((r+.055)/1.055,2.4),i<=.03928?a=i/12.92:a=Math.pow((i+.055)/1.055,2.4),.2126*o+.7152*s+.0722*a},setAlpha:function(t){return this._a=Tt(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=Ye(this._r,this._g,this._b);return{h:t.h*360,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=Ye(this._r,this._g,this._b),n=Math.round(t.h*360),r=Math.round(t.s*100),i=Math.round(t.v*100);return this._a==1?"hsv("+n+", "+r+"%, "+i+"%)":"hsva("+n+", "+r+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var t=ze(this._r,this._g,this._b);return{h:t.h*360,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=ze(this._r,this._g,this._b),n=Math.round(t.h*360),r=Math.round(t.s*100),i=Math.round(t.l*100);return this._a==1?"hsl("+n+", "+r+"%, "+i+"%)":"hsla("+n+", "+r+"%, "+i+"%, "+this._roundA+")"},toHex:function(t){return je(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return di(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(g(this._r,255)*100)+"%",g:Math.round(g(this._g,255)*100)+"%",b:Math.round(g(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(g(this._r,255)*100)+"%, "+Math.round(g(this._g,255)*100)+"%, "+Math.round(g(this._b,255)*100)+"%)":"rgba("+Math.round(g(this._r,255)*100)+"%, "+Math.round(g(this._g,255)*100)+"%, "+Math.round(g(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Ai[je(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var n="#"+Xe(this._r,this._g,this._b,this._a),r=n,i=this._gradientType?"GradientType = 1, ":"";if(t){var o=l(t);r="#"+Xe(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+n+",endColorstr="+r+")"},toString:function(t){var n=!!t;t=t||this._format;var r=!1,i=this._a<1&&this._a>=0,o=!n&&i&&(t==="hex"||t==="hex6"||t==="hex3"||t==="hex4"||t==="hex8"||t==="name");return o?t==="name"&&this._a===0?this.toName():this.toRgbString():(t==="rgb"&&(r=this.toRgbString()),t==="prgb"&&(r=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(r=this.toHexString()),t==="hex3"&&(r=this.toHexString(!0)),t==="hex4"&&(r=this.toHex8String(!0)),t==="hex8"&&(r=this.toHex8String()),t==="name"&&(r=this.toName()),t==="hsl"&&(r=this.toHslString()),t==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},clone:function(){return l(this.toString())},_applyModification:function(t,n){var r=t.apply(null,[this].concat([].slice.call(n)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(_i,arguments)},brighten:function(){return this._applyModification(mi,arguments)},darken:function(){return this._applyModification(pi,arguments)},desaturate:function(){return this._applyModification(fi,arguments)},saturate:function(){return this._applyModification(hi,arguments)},greyscale:function(){return this._applyModification(gi,arguments)},spin:function(){return this._applyModification(wi,arguments)},_applyCombination:function(t,n){return t.apply(null,[this].concat([].slice.call(n)))},analogous:function(){return this._applyCombination(yi,arguments)},complement:function(){return this._applyCombination(bi,arguments)},monochromatic:function(){return this._applyCombination(Ei,arguments)},splitcomplement:function(){return this._applyCombination(vi,arguments)},triad:function(){return this._applyCombination(Je,[3])},tetrad:function(){return this._applyCombination(Je,[4])}};l.fromRatio=function(e,t){if(oe(e)=="object"){var n={};for(var r in e)e.hasOwnProperty(r)&&(r==="a"?n[r]=e[r]:n[r]=$(e[r]));e=n}return l(e,t)};function ai(e){var t={r:0,g:0,b:0},n=1,r=null,i=null,o=null,s=!1,a=!1;return typeof e=="string"&&(e=xi(e)),oe(e)=="object"&&(P(e.r)&&P(e.g)&&P(e.b)?(t=ci(e.r,e.g,e.b),s=!0,a=String(e.r).substr(-1)==="%"?"prgb":"rgb"):P(e.h)&&P(e.s)&&P(e.v)?(r=$(e.s),i=$(e.v),t=ui(e.h,r,i),s=!0,a="hsv"):P(e.h)&&P(e.s)&&P(e.l)&&(r=$(e.s),o=$(e.l),t=li(e.h,r,o),s=!0,a="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=Tt(n),{ok:s,format:e.format||a,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}function ci(e,t,n){return{r:g(e,255)*255,g:g(t,255)*255,b:g(n,255)*255}}function ze(e,t,n){e=g(e,255),t=g(t,255),n=g(n,255);var r=Math.max(e,t,n),i=Math.min(e,t,n),o,s,a=(r+i)/2;if(r==i)o=s=0;else{var c=r-i;switch(s=a>.5?c/(2-r-i):c/(r+i),r){case e:o=(t-n)/c+(t<n?6:0);break;case t:o=(n-e)/c+2;break;case n:o=(e-t)/c+4;break}o/=6}return{h:o,s,l:a}}function li(e,t,n){var r,i,o;e=g(e,360),t=g(t,100),n=g(n,100);function s(u,_,d){return d<0&&(d+=1),d>1&&(d-=1),d<1/6?u+(_-u)*6*d:d<1/2?_:d<2/3?u+(_-u)*(2/3-d)*6:u}if(t===0)r=i=o=n;else{var a=n<.5?n*(1+t):n+t-n*t,c=2*n-a;r=s(c,a,e+1/3),i=s(c,a,e),o=s(c,a,e-1/3)}return{r:r*255,g:i*255,b:o*255}}function Ye(e,t,n){e=g(e,255),t=g(t,255),n=g(n,255);var r=Math.max(e,t,n),i=Math.min(e,t,n),o,s,a=r,c=r-i;if(s=r===0?0:c/r,r==i)o=0;else{switch(r){case e:o=(t-n)/c+(t<n?6:0);break;case t:o=(n-e)/c+2;break;case n:o=(e-t)/c+4;break}o/=6}return{h:o,s,v:a}}function ui(e,t,n){e=g(e,360)*6,t=g(t,100),n=g(n,100);var r=Math.floor(e),i=e-r,o=n*(1-t),s=n*(1-i*t),a=n*(1-(1-i)*t),c=r%6,u=[n,s,o,o,a,n][c],_=[a,n,n,s,o,o][c],d=[o,o,a,n,n,s][c];return{r:u*255,g:_*255,b:d*255}}function je(e,t,n,r){var i=[x(Math.round(e).toString(16)),x(Math.round(t).toString(16)),x(Math.round(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function di(e,t,n,r,i){var o=[x(Math.round(e).toString(16)),x(Math.round(t).toString(16)),x(Math.round(n).toString(16)),x(Lt(r))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function Xe(e,t,n,r){var i=[x(Lt(r)),x(Math.round(e).toString(16)),x(Math.round(t).toString(16)),x(Math.round(n).toString(16))];return i.join("")}l.equals=function(e,t){return!e||!t?!1:l(e).toRgbString()==l(t).toRgbString()};l.random=function(){return l.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function fi(e,t){t=t===0?0:t||10;var n=l(e).toHsl();return n.s-=t/100,n.s=le(n.s),l(n)}function hi(e,t){t=t===0?0:t||10;var n=l(e).toHsl();return n.s+=t/100,n.s=le(n.s),l(n)}function gi(e){return l(e).desaturate(100)}function _i(e,t){t=t===0?0:t||10;var n=l(e).toHsl();return n.l+=t/100,n.l=le(n.l),l(n)}function mi(e,t){t=t===0?0:t||10;var n=l(e).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(t/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(t/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(t/100)))),l(n)}function pi(e,t){t=t===0?0:t||10;var n=l(e).toHsl();return n.l-=t/100,n.l=le(n.l),l(n)}function wi(e,t){var n=l(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,l(n)}function bi(e){var t=l(e).toHsl();return t.h=(t.h+180)%360,l(t)}function Je(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var n=l(e).toHsl(),r=[l(e)],i=360/t,o=1;o<t;o++)r.push(l({h:(n.h+o*i)%360,s:n.s,l:n.l}));return r}function vi(e){var t=l(e).toHsl(),n=t.h;return[l(e),l({h:(n+72)%360,s:t.s,l:t.l}),l({h:(n+216)%360,s:t.s,l:t.l})]}function yi(e,t,n){t=t||6,n=n||30;var r=l(e).toHsl(),i=360/n,o=[l(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,o.push(l(r));return o}function Ei(e,t){t=t||6;for(var n=l(e).toHsv(),r=n.h,i=n.s,o=n.v,s=[],a=1/t;t--;)s.push(l({h:r,s:i,v:o})),o=(o+a)%1;return s}l.mix=function(e,t,n){n=n===0?0:n||50;var r=l(e).toRgb(),i=l(t).toRgb(),o=n/100,s={r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a};return l(s)};l.readability=function(e,t){var n=l(e),r=l(t);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)};l.isReadable=function(e,t,n){var r=l.readability(e,t),i,o;switch(o=!1,i=Ii(n),i.level+i.size){case"AAsmall":case"AAAlarge":o=r>=4.5;break;case"AAlarge":o=r>=3;break;case"AAAsmall":o=r>=7;break}return o};l.mostReadable=function(e,t,n){var r=null,i=0,o,s,a,c;n=n||{},s=n.includeFallbackColors,a=n.level,c=n.size;for(var u=0;u<t.length;u++)o=l.readability(e,t[u]),o>i&&(i=o,r=l(t[u]));return l.isReadable(e,r,{level:a,size:c})||!s?r:(n.includeFallbackColors=!1,l.mostReadable(e,["#fff","#000"],n))};var be=l.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Ai=l.hexNames=Si(be);function Si(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function Tt(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function g(e,t){Ri(e)&&(e="100%");var n=ki(e);return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function le(e){return Math.min(1,Math.max(0,e))}function A(e){return parseInt(e,16)}function Ri(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function ki(e){return typeof e=="string"&&e.indexOf("%")!=-1}function x(e){return e.length==1?"0"+e:""+e}function $(e){return e<=1&&(e=e*100+"%"),e}function Lt(e){return Math.round(parseFloat(e)*255).toString(16)}function Qe(e){return A(e)/255}var R=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",n="(?:"+t+")|(?:"+e+")",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{CSS_UNIT:new RegExp(n),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function P(e){return!!R.CSS_UNIT.exec(e)}function xi(e){e=e.replace(oi,"").replace(si,"").toLowerCase();var t=!1;if(be[e])e=be[e],t=!0;else if(e=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=R.rgb.exec(e))?{r:n[1],g:n[2],b:n[3]}:(n=R.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=R.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=R.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=R.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=R.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=R.hex8.exec(e))?{r:A(n[1]),g:A(n[2]),b:A(n[3]),a:Qe(n[4]),format:t?"name":"hex8"}:(n=R.hex6.exec(e))?{r:A(n[1]),g:A(n[2]),b:A(n[3]),format:t?"name":"hex"}:(n=R.hex4.exec(e))?{r:A(n[1]+""+n[1]),g:A(n[2]+""+n[2]),b:A(n[3]+""+n[3]),a:Qe(n[4]+""+n[4]),format:t?"name":"hex8"}:(n=R.hex3.exec(e))?{r:A(n[1]+""+n[1]),g:A(n[2]+""+n[2]),b:A(n[3]+""+n[3]),format:t?"name":"hex"}:!1}function Ii(e){var t,n;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),t!=="AA"&&t!=="AAA"&&(t="AA"),n!=="small"&&n!=="large"&&(n="small"),{level:t,size:n}}function Pi(){const e=[],t=new RegExp(/rgba\((\d+),\s*(\d+),\s*(\d+),\s*(0(\.0*)?)\)/);if(document.querySelectorAll("button").forEach(s=>{const a=window.getComputedStyle(s),c=a.getPropertyValue("background-color"),u=a.getPropertyValue("color");a.getPropertyValue("display")!=="none"&&!t.test(c)&&e.push({backgroundColor:c,color:u,classList:s.classList.toString()})}),e.length===0)return null;const n=new RegExp(/btn.*|.*button.*/i),i=e.every(s=>!n.test(s.classList))?e:e.filter(s=>n.test(s.classList));if(i.length===0)return null;if(i.length===1)return ve(i[0].backgroundColor,i[0].color);const{mostFrequentColor:o}=i.reduce((s,a)=>{const c=a.backgroundColor;return s.colors[c]=(s.colors[c]||0)+1,s.colors[c]>s.maxCount&&(s.maxCount=s.colors[c],s.mostFrequentColor={backgroundColor:a.backgroundColor,color:a.color}),s},{colors:{},mostFrequentColor:null,maxCount:0});return ve(o.backgroundColor,o.color)}async function Ti(){var e;try{const t=((e=document.querySelector('link[rel~="icon"]'))==null?void 0:e.href)||new URL("/favicon.ico",window.location.origin).toString(),{width:n,height:r}=await Di(t);return n<35||r<30?null:t}catch{return null}}function Li(){return window.getComputedStyle(document.body).getPropertyValue("font-family")}function Di(e){return new Promise((t,n)=>{const r=new Image;r.src=e,r.onload=()=>t({width:r.width,height:r.height}),r.onerror=n})}function Ci(e){const t=e.toRgb();return(t.r+t.g+t.b)/3>=245}function ve(e,t){const n=l(e);if(!n.isValid())return null;const r=n.toString("hex"),i=n.isLight()?"black":"white";let o=i;if(t){const a=l(t).toString("hex");o=r===a?i:a}const s=Ci(n)?"black":r;return{backgroundColor:r,borderColor:s,color:o}}var q=(e=>(e[e.soft=0]="soft",e[e.hard=1]="hard",e[e.adaptive=2]="adaptive",e[e.dynamic=3]="dynamic",e))(q||{});const O=Ni(),Mi=Hi();var tt,nt;let G=(nt=(tt=window.__bt_tag_d)==null?void 0:tt.siteInfo)==null?void 0:nt.websiteID;var rt;const K=((rt=window.__bt_tag_d)==null?void 0:rt.orgID)||Bi(),X=Oi(),Ze=Fi();var it;const Dt=((it=window.__bt_intrnl)==null?void 0:it.traceID)||Wi(),Ct=Ui();function Ui(){let e=sessionStorage.getItem("BT_sid");return e||(e=Ot(8,10),sessionStorage.setItem("BT_sid",e)),e}function Mt(e){const t=new URL(import.meta.url),r=new URLSearchParams(t.search).get(e);if(!r)throw new Error(`${e} query param not found`);return r}function Ut(e){var t,n;if(["development","test"].includes("production")&&((n=(t=window.__bt_rlink_test)==null?void 0:t.params)!=null&&n[e]))return window.__bt_rlink_test.params[e]}function Bi(){const e=Ut("o");if(e)return e;const t=Mt("o");return window.__bt_tag_d||(window.__bt_tag_d={}),window.__bt_tag_d.orgID=t,t}function Oi(){const e=Ut("bt_env");if(e)return e;try{return Mt("bt_env")}catch{return An}}function Ni(){return Bt("API_DOMAIN","api.btmessage.com")}function Hi(){return Bt("ASSETS_LOCATION","cdn.btmessage.com")}function Bt(e,t){if(t==null||t==="")throw new Error("missing env var for "+e);return t}function Fi(){var t,n;if(["development","test"].includes("production")&&((t=window.__bt_rlink_test)!=null&&t.hostname))return(n=window.__bt_rlink_test)==null?void 0:n.hostname;let e=Qr.hostname;try{if(e==="disqusservice.com"){const r=new URLSearchParams(k.location.search);e=new URL(r.get("sourceUrl")).hostname+"-disqus"}}catch{e=k.location.hostname}return e.startsWith("www.")&&(e=e.replace("www.","")),e}function Ot(e,t){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(Math.random()*(t+1-e))+e;let i="";for(let o=0;o<r;o++)i+=n.charAt(Math.floor(Math.random()*n.length));return i}function Wi(){return window.__bt_intrnl=window.__bt_intrnl||{},window.__bt_intrnl.traceID=Ot(8,10),window.__bt_intrnl.traceID}async function Vi(){var o,s;if(M&&((o=window.__bt_tag_am)!=null&&o.settings))return window.__bt_tag_am.settings;if(window.__bt_tag_am=window.__bt_tag_am||{},!K||!Ze)throw new Error("orgID or hostname not found");const e=new URL(`https://${O}/websiteconfig`),t=Ce();e.searchParams.set("bt_env",X),e.searchParams.set("o",K),e.searchParams.set("w",Ze),e.searchParams.set("l",t);const n=await fetch(e.toString());if(!n.ok)throw new Error(`Settings request failed. URL: ${e}; StatusCode: ${n.status}`);const r=await n.json();if(!r.messageWall)throw new Error(`Invalid settings response: ${r}`);window.__bt_tag_am.settings=r.messageWall;const i=(s=r.tagData)==null?void 0:s.w;return window.__bt_tag_d||(window.__bt_tag_d={}),window.__bt_tag_d.siteInfo||(window.__bt_tag_d.siteInfo={}),window.__bt_tag_d.siteInfo.websiteID=i,G=i,window.__bt_tag_am.settings}let ee=null;const qi=async()=>ee||(ee=Vi(),ee),Nt=async e=>e.logo||e.disable_automatic_detection?e.logo:Ti(),Ht=e=>e.font_type?`${e.font_type}, sans-serif`:e.disable_automatic_detection?'"Segoe UI", Helvetica, Arial, sans-serif;':Li(),Ft=e=>e.cta_button_color?ve(e.cta_button_color):e.disable_automatic_detection?null:Pi(),Wt=e=>{var n,r;if(e.wall_mode!==3)return null;const t=e.dynamic_wall_settings||{pageviews_count:1,dismiss_count:1};return((n=e.dynamic_wall_settings)==null?void 0:n.pageviews_count)===0&&(t.pageviews_count=1),((r=e.dynamic_wall_settings)==null?void 0:r.dismiss_count)===0&&(t.dismiss_count=1),t},Ki=async()=>{const e=await qi(),t=e.view||"modal",n=Number(e.page_views_to_render),r=Number(e.render_interval_days),i=Number(e.attribution_window_days),o=!!e.allow_render_to_aa_users,s=Wt(e),a=await Nt(e),c=Ht(e),u=Ft(e);return{...e,logo:a,font_type:c,view:t,page_views_to_render:n,render_interval_days:r,attribution_window_days:i,allow_render_to_aa_users:o,button_style:u,dynamic_wall_settings:s,i18n:e.i18n}};async function Gi(e,t,n){var o;if(M&&((o=window.__bt_tag_am)!=null&&o.settings))return{settings:window.__bt_tag_am.settings};if(!K||!e||!n)throw new Error("Required data not found to fetch render settings");const r=new URL(`https://${O}/mw/settings`);r.searchParams.set("bt_env",X),r.searchParams.set("o",K),r.searchParams.set("w",e),r.searchParams.set("r",String(n.ab)),r.searchParams.set("aa",String(n.acceptable)),r.searchParams.set("l",Ce()),t!=null&&t.renderDate&&r.searchParams.set("rts",t.renderDate.getTime().toString()),t!=null&&t.attributionExpiry&&r.searchParams.set("exp",t.attributionExpiry.toString()),t!=null&&t.recoveryType&&r.searchParams.set("rec",t.recoveryType);const i=await fetch(r.toString(),{method:"GET"});if(!i.ok)throw new Error(`Settings request failed. URL: ${r}; StatusCode: ${i.status}`);return i.status===204?null:await i.json()}let te=null;const $i=async(e,t,n)=>te||(te=Gi(e,t,n),te),zi=async e=>{if(!e)return null;const t=e.view||"modal",n=Number(e.page_views_to_render),r=Number(e.attribution_window_days),i=!!e.allow_render_to_aa_users,o=await Nt({logo:e.logo,disable_automatic_detection:e.disable_automatic_detection}),s=Ht({font_type:e.font_type,disable_automatic_detection:e.disable_automatic_detection}),a=Ft({cta_button_color:e.cta_button_color,disable_automatic_detection:e.disable_automatic_detection}),c=Wt(e);return{...e,logo:o,view:t,page_views_to_render:n,attribution_window_days:r,allow_render_to_aa_users:i,font_type:s,button_style:a,dynamic_wall_settings:c}},Yi=async(e,t,n)=>{const r=await $i(e,t,n);if(r){const i=r.attribution,o=await zi(r.settings),s=o?!1:!!(i!=null&&i.renderDate)&&!!(i!=null&&i.attributionExpiry);return!(t!=null&&t.renderDate)&&!(t!=null&&t.recoveryType)&&s?{settings:o,recovered:s,userState:{renderDate:i==null?void 0:i.renderDate,attributionExpiry:i==null?void 0:i.attributionExpiry,recoveryType:i==null?void 0:i.recoveryType},sign:r.sign,message:"get settings: server side attribution"}:{settings:o,recovered:s,userState:t,sign:r.sign,message:"get settings"}}return{settings:void 0,recovered:!1,sign:null,userState:t,message:"no response"}},ji=async(e,t,n)=>{try{return Yi(e,t,n)}catch(r){return w("rlink.getSettingsError",{aaResults:window.__bt_intrnl.aaDetectionResults,error:r instanceof Error?r.message:r},{severity:4}),{settings:{},recovered:!1,sign:null,userState:t,message:"error on fetch settings"}}};async function Xi(e,t,n){const r=await bt(),i=await ji(G,r,t);Ji(e,i,n)}function Ji(e,t,n){if(!!n!==t.recovered){w("rlink.recoveryStateMismatch",{aaResults:window.__bt_intrnl.aaDetectionResults,swRecovered:n,newSettings:{recovered:t.recovered},storageData:t.userState,message:t.message},{severity:4});return}if(t.settings){const r=t.settings,i=Vt(e,r);Object.keys(i).length>0&&w("rlink.settingsMismatch",{aaResults:window.__bt_intrnl.aaDetectionResults,settingsDiff:i},{severity:4})}}function Vt(e,t){const n=["cta_button_color","custom_css","font_type","button_style"],r={};for(const i in t){const o=n.includes(i);if(e[i]!==t[i]&&!o)if(typeof e[i]=="object"&&typeof t[i]=="object"&&e[i]!==null&&t[i]!==null)if(Array.isArray(e[i])&&Array.isArray(t[i]))Qi(e[i],t[i])||(r[i]={old:e[i],new:t[i]});else{const s=Vt(e[i],t[i]);Object.keys(s).length>0&&(r[i]=s)}else r[i]={old:e[i],new:t[i]}}return r}function Qi(e,t){return e.length!==t.length?!1:JSON.stringify([...e].sort())===JSON.stringify([...t].sort())}class Zi{constructor(t){y(this,"onDismiss",async t=>{zn().then(n=>{if(!n)return U({...t,event:"dismiss",detectedExtension:this.detectedExtension}).catch(()=>null),Yn(t)})});this.detectedExtension=t}}class eo{constructor(t){y(this,"onDismiss",t=>{U({...t,event:"dismiss",detectedExtension:this.detectedExtension}).catch(()=>null)});this.detectedExtension=t}}const to=(e,t)=>t.render_mode==="api"&&t.api_mode==="wait"?new eo(e):new Zi(e),ne="unknown",F=class F{constructor(){y(this,"impressionsCount",0);y(this,"trackingStarted",!1);y(this,"trackedSlots",new Set);y(this,"isGAM");this.detectGAM(),this.startTracking()}static getInstance(){return F.instance||(F.instance=new F),F.instance}detectGAM(){this.isGAM=!!window.googletag&&(!!window.googletag.pubads||!!window.googletag.cmd)}startTracking(){if(!this.trackingStarted){this.trackingStarted=!0;try{this.isGAM?this.trackGptImpressions():this.trackPrebidImpressions()}catch(t){B()&&w("rlink.impressionTracking",{error:t instanceof Error?t.message:t},{severity:3})}}}trackPrebidImpressions(){const t=st();t.length!==0&&t.forEach(n=>{n.onEvent("bidWon",r=>{const i=r.adUnitCode||`${ne}-slot`,o=r.creativeId||ne,s=r.bidder||ne,a=`${i}_${s}_${o}`;this.trackedSlots.has(a)||(this.impressionsCount++,this.trackedSlots.add(a))})})}trackGptImpressions(){var t,n;(n=(t=window.googletag)==null?void 0:t.cmd)==null||n.push(()=>{window.googletag.pubads().addEventListener("slotRenderEnded",r=>{const i=r.slot.getSlotElementId(),o=r.sourceAgnosticCreativeId||ne,s=!r.isEmpty&&r.slotContentChanged,a=`${i}_${o}`;this.trackedSlots.has(a)||!s||(this.impressionsCount++,this.trackedSlots.add(a))})})}getImpressionsCount(){return this.impressionsCount}resetCounter(){this.impressionsCount=0,this.trackingStarted=!1}};y(F,"instance",null);let se=F;const no=60*1e3;function ro(e,t,n){const r=()=>{const c=e.getImpressionsCount();e.resetCounter(),!window.__bt_tag_am.kvpEventSent&&(U({event:"recovered-ads",meta:{impressionsCount:c},recoveryType:t,detectedExtension:n}).catch(()=>null),window.__bt_tag_am.kvpEventSent=!0)},i=()=>{r(),window.removeEventListener("beforeunload",i)};window.addEventListener("beforeunload",i),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&r()}),(()=>{setInterval(()=>{const c=e.getImpressionsCount();window.__bt_tag_am.kvpEventSent&&c>0&&(window.__bt_tag_am.kvpEventSent=!1)},5e3)})();let s;const a=()=>{window.__bt_tag_am.kvpEventSent||(clearTimeout(s),s=setTimeout(()=>{r()},no))};["mousemove","keydown","scroll","click"].forEach(c=>{document.addEventListener(c,a)}),a()}function io(e,t){Pt(e,t)&&(pn(),se.getInstance(),B()&&w("rlink.appendKVP",{aaResults:window.__bt_intrnl.aaDetectionResults,attributionExpiry:t,consentData:window.__bt_intrnl.consentData},{severity:1}))}async function oo(e,t,n){const r=se.getInstance();if(ro(r,e,n),!await rr())return U({event:"recovered",recoveryType:e,detectedExtension:n}).catch(()=>null),ar(e,t)}const so=(e,t)=>{hr(e),U({event:"flattr",detectedExtension:t}).catch(()=>null)},_e=async(e,t,n,r,i,o)=>{if(!window.__bt_intrnl.rlPVSent){window.__bt_intrnl.rlPVSent=!0;let s="non_ab_pageview";n.ab&&(s=n.acceptable?"aa_pageview":"ab_pageview");const a=Pt(t,o);(e||a)&&U({event:s,detectedExtension:r,consentMessageShown:i,recoveryType:t,attributionExpired:t?!a:null}).catch(c=>{w("rlink.onPageViewError",{aaResults:window.__bt_intrnl.aaDetectionResults,error:c instanceof Error?c.message:c},{severity:4})})}},ao=(e,t)=>{const[n]=k.performance.getEntriesByType("navigation"),r=(n==null?void 0:n.type)==="reload";!Zn()&&!r&&(er(),U({event:"navigate-away",detectedExtension:e,renderMode:t.render_mode}).catch(()=>null))};class co{constructor(t,n,r){y(this,"out",{API_READY_EVENT:"bt-rlink-api-ready"});y(this,"interval");this.api=t,this.eventHandler=n,this.apiReadyEventInterval=r}async start(){this.api.start(),this.startDispatchingReadyEvent()}sendReadyEvent(){const t=this.api.getAPIPayload();this.eventHandler.dispatchEvent(new CustomEvent(this.out.API_READY_EVENT,{detail:{api:()=>(this.stopDispatchingReadyEvent(),t)}}))}startDispatchingReadyEvent(){this.sendReadyEvent(),this.interval=setInterval(()=>{this.sendReadyEvent()},this.apiReadyEventInterval)}stopDispatchingReadyEvent(){clearInterval(this.interval)}}class lo{constructor(t,n){y(this,"shouldRender",!0);this.render=t,this.apiPreventWaitTime=n}start(){this.renderIfNotPrevented()}getAPIPayload(){return{prevent:()=>{this.preventRender()},render:()=>{this.render()}}}renderIfNotPrevented(){setTimeout(()=>{this.shouldRender&&this.render()},this.apiPreventWaitTime)}preventRender(){this.shouldRender=!1}}class uo{constructor(t){this.render=t}start(){}getAPIPayload(){return{render:()=>{this.render()}}}}const fo=200,ho=50;class go{constructor(t,n={},r=window){y(this,"eventManager");let i;const{mode:o="wait",apiReadyEventInterval:s=fo,apiPreventWaitTime:a=ho}=n;o==="auto"?i=new lo(t,a):i=new uo(t),this.eventManager=new co(i,r,s)}expose(){this.eventManager.start()}}const _o=!1;(async()=>{var t;if(window.__bt_rlink_already_invoked)return;ri(),window.__bt_rlink_already_invoked=!0;const e=xt();We("version","946afcb-am"),We("isMobile",e?"true":"false");try{await ce();let n="unknown";const[r,i,o]=await Promise.all([fn(),yr(),Ki()]);if(window.__bt_intrnl.consentData=i,!i.isConsentGiven){await Ge(),_e(o.enabled,void 0,r,n,i.consentShownInCurrentPV,void 0);return}!o.enabled&&_o&&await Ge();const{allow_render_to_aa_users:s,wall_mode:a}=o,c=Hr(r,s)||i.consentShownInCurrentPV;if(!await qn(o)&&c){_e(o.enabled,void 0,r,n,i.consentShownInCurrentPV,void 0);return}const{swRecovered:_,attributionExpiry:d}=await ir(o,r);_&&!e&&io(_,d);const[h,L]=await Promise.all([Mr(o),ie("dismiss")]),N={adblockplus:"abp",adblock:"ab"};h!=null&&h.extensionInfo&&h.extensionInfo.name in N?n=N[h.extensionInfo.name]:n=await Mn();const W=(t=h==null?void 0:h.extensionInfo)==null?void 0:t.allowlistState,H=or(_,W);if(_e(o.enabled,H,r,n,i.consentShownInCurrentPV,d),_&&!e){oo(H,d,n).catch(I=>{w("rlink.onRecoverError",{aaResults:window.__bt_intrnl.aaDetectionResults,error:I instanceof Error?I.message:I},{severity:4})}),B()&&w("rlink.scaState",{aaResults:window.__bt_intrnl.aaDetectionResults,scaFlag:mt(),recoveryType:H,extAllowlistState:W},{severity:1});return}o.enabled&&Xi(o,r,H).catch(()=>null);const ue=a===q.dynamic;!ue&&L>0&&await wt();const Me=()=>{ao(n,o)},Ue=I=>{I==="subscribe"?window.addEventListener("beforeunload",Me):window.removeEventListener("beforeunload",Me)},qt=to(n,o),Be=async I=>{Ue("unsubscribe"),qt.onDismiss(I)},Oe=await $n(),Ne=Zr({settings:o,aaDetectionResults:r,dismissCount:L});if(Oe&&!Ne){if(Be(Oe),!ue)return;ue&&L<=0&&await _t()}if(h!=null&&h.isPremium){so(h,n);return}c||Nr(o).then(I=>{I&&an(async()=>{const{render:de}=await import("../assets/App-DRFGbqCY.js");return{render:de}},[]).then(({render:de})=>{const Kt={settings:o,onDismiss:Be,beforeUnload:Ue,detectedExtension:n,isHardMode:Ne},He=()=>de(Kt);o.render_mode==="api"?new go(He,{mode:o.api_mode}).expose():He()})})}catch(n){w("rlink.executionError",{aaResults:window.__bt_intrnl.aaDetectionResults,consent:window.__bt_intrnl.consentData,error:n instanceof Error?n.message:String(n),...(n==null?void 0:n.cause)&&{cause:n.cause instanceof Error?n.cause.message:String(n.cause)}},{severity:5});return}})();export{qr as D,M as R,q as W,wo as a,ie as b,rn as c,Tr as d,Eo as e,O as f,$n as g,po as h,Ge as i,X as j,bo as k,w as l,B as m,vo as n,yo as o,Kr as p,pt as q,nr as r,U as s,wt as t,Mi as u,Ao as v,G as w};
//# sourceMappingURL=946afcb-am.js.map
